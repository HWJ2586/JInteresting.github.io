<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mybatis</title>
      <link href="/posts/Mybatis/"/>
      <url>/posts/Mybatis/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\css\APlayer.min.css"><script src="\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\js\Meting.min.js"></script><h1 id="第一章-框架概述"><a href="#第一章-框架概述" class="headerlink" title="第一章 框架概述"></a><center>第一章 框架概述</center></h1><h2 id="软件开发常用结构"><a href="#软件开发常用结构" class="headerlink" title="软件开发常用结构"></a>软件开发常用结构</h2><h3 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h3><div class="note info">            <p>界面层（User Interface layer）、业务逻辑层（Business Logic Layer）、数据访问层（Data access layer）</p>          </div><ul><li><p><strong>三层的职责:</strong></p><ol><li>界面层（表示层，视图层）：主要功能是接受用户的数据，显示请求的处理结果。使用 web 页面和<br>用户交互，手机 app 也就是表示层的，用户在 app 中操作，业务逻辑在服务器端处理。</li><li>业务逻辑层：接收表示传递过来的数据，检查数据，计算业务逻辑，调用数据访问层获取数据。</li><li>数据访问层：与数据库打交道。主要实现对数据的增、删、改、查。将存储在数据库中的数据提交<br>给业务层，同时将业务层处理的数据保存到数据库</li></ol></li></ul><ul><li><p><strong>三层的处理请求的交互：</strong></p><div class="note info">            <p>用户—&gt; 界面层—&gt;业务逻辑层—&gt;数据访问层—&gt;DB 数据库</p>          </div><p><img src="/blog-img/Mybatis/pasted-3.png" alt="upload successful"></p></li><li><p><strong>为什么要使用三层？</strong></p><ol><li>结构清晰、耦合度低, 各层分工明确</li><li>可维护性高，可扩展性高</li><li>有利于标准化</li><li>开发人员可以只关注整个结构中的其中某一层的功能实现</li><li>有利于各层逻辑的复用</li></ol></li></ul><h3 id="常用框架"><a href="#常用框架" class="headerlink" title="常用框架"></a>常用框架</h3><ul><li><p><strong>常见的 J2EE 中开发框架：</strong></p><blockquote><p>MyBatis 框架：<br>MyBatis 是一个优秀的基于 java 的持久层框架，内部封装了 jdbc，开发者只需要关注 sql 语句<br>本身，而不需要处理加载驱动、创建连接、创建 statement、关闭连接，资源等繁杂的过程。<br>MyBatis 通过 xml 或注解两种方式将要执行的各种 sql 语句配置起来，并通过 java 对象和 sql 的<br>动态参数进行映射生成最终执行的 sql 语句，最后由 mybatis 框架执行 sql 并将结果映射为 java<br>对象并返回。</p></blockquote><blockquote><p>Spring 框架：<br>Spring 框架为了解决软件开发的复杂性而创建的。Spring 使用的是基本的 JavaBean 来完成以前<br>非常复杂的企业级开发。Spring 解决了业务对象，功能模块之间的耦合，不仅在 javase,web 中使用，<br>大部分 Java 应用都可以从 Spring 中受益。<br>Spring 是一个轻量级控制反转(IoC)和面向切面(AOP)的容器。</p></blockquote><blockquote><p>SpringMVC 框架<br>Spring MVC 属于 SpringFrameWork 3.0 版本加入的一个模块，为 Spring 框架提供了构建 Web<br>应用程序的能力。现在可以 Spring 框架提供的 SpringMVC 模块实现 web 应用开发，在 web 项目中<br>可以无缝使用 Spring 和 Spring MVC 框架。</p></blockquote></li></ul><h2 id="框架是什么"><a href="#框架是什么" class="headerlink" title="框架是什么"></a>框架是什么</h2><ul><li><p><strong>框架定义</strong></p><blockquote><p>框架（Framework）是整个或部分系统的可重用设计，表现为一组抽象构件及构件实例间交互的方<br>法;另一种认为，框架是可被应用开发者定制的应用骨架、模板。<br>简单的说，框架其实是半成品软件，就是一组组件，供你使用完成你自己的系统。从另一个角度来<br>说框架一个舞台，你在舞台上做表演。在框架基础上加入你要完成的功能。<br>框架安全的，可复用的，不断升级的软件。</p></blockquote></li><li><p><strong>框架解决的问题</strong></p><blockquote><p>框架要解决的最重要的一个问题是技术整合，在 J2EE 的 框架中，有着各种各样的技术，不同的应<br>用，系统使用不同的技术解决问题。需要从 J2EE 中选择不同的技术，而技术自身的复杂性，有导致更<br>大的风险。企业在开发软件项目时，主要目的是解决业务问题。 即要求企业负责技术本身，又要求解<br>决业务问题。这是大多数企业不能完成的。框架把相关的技术融合在一起，企业开发可以集中在业务领<br>域方面。<br>另一个方面可以提供开发的效率。</p></blockquote></li></ul><h2 id="JDBC-编程"><a href="#JDBC-编程" class="headerlink" title="JDBC 编程"></a>JDBC 编程</h2><ul><li><p><strong>使用 JDBC 编程的回顾</strong>(展开查看代码)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//注册 mysql 驱动 MySQL8.0 连接(com.mysql.cj.jdbc.Driver)</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//连接数据的基本信息 url ，username，password</span></span><br><span class="line">String url = <span class="string">"jdbc:mysql://localhost:3306/springdb"</span>;<span class="comment">//MySQL8.0 需要加上  ?useSSL=false&amp;amp;serverTimezone=UTC</span></span><br><span class="line">String username = <span class="string">"root"</span>;</span><br><span class="line">String password = <span class="string">"123456"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建连接对象</span></span><br><span class="line">conn = DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存查询结果</span></span><br><span class="line">List&lt;Student&gt; stuList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 Statement, 用来执行 sql 语句</span></span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行查询，创建记录集，</span></span><br><span class="line">rs = stmt.executeQuery(<span class="string">"select * from student"</span>);</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">stu.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">stu.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">stu.setAge(rs.getInt(<span class="string">"age"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//从数据库取出数据转为 Student 对象，封装到 List 集合</span></span><br><span class="line">stuList.add(stu);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//关闭资源</span></span><br><span class="line"><span class="keyword">if</span> (rs != <span class="keyword">null</span>) ;</span><br><span class="line">&#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (stmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">        &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>使用 JDBC 的缺陷</strong></p><ol><li>代码比较多，开发效率低</li><li>需要关注 Connection ,Statement, ResultSet 对象创建和销毁</li><li>对 ResultSet 查询的结果，需要自己封装为 List</li><li>重复的代码比较多些</li><li>业务代码和数据库的操作混在一起</li></ol></li></ul><h2 id="MyBatis-框架概述"><a href="#MyBatis-框架概述" class="headerlink" title="MyBatis 框架概述"></a>MyBatis 框架概述</h2><blockquote><p>MyBatis 框架：<br>MyBatis 本是 apache 的一个开源项目 iBatis, 2010 年这个项目由 apache software foundation 迁<br>移到了 google code，并且改名为 MyBatis 。2013 年 11 月迁移到 Github。<br>iBATIS 一词来源于“internet”和“abatis”的组合，是一个基于 Java 的持久层框架。iBATIS 提供的<br>持久层框架包括 SQL Maps 和 Data Access Objects（DAOs）<br>当前，最新版本是 MyBatis 3.5.1 ，其发布时间是 2019 年 4 月 8 日。</p></blockquote><ul><li><strong>MyBatis 解决的主要问题</strong><ul><li><mark>减轻使用 JDBC 的复杂性，不用编写重复的创建 Connetion , Statement ; 不用编写关闭资源代码。直接使用 java 对象，表示结果数据。让开发者专注 SQL 的处理。 其他分心的工作由 MyBatis 代劳。</mark></li></ul></li></ul><h1 id="第二章-MyBatis-框架快速入门"><a href="#第二章-MyBatis-框架快速入门" class="headerlink" title="第二章 MyBatis 框架快速入门"></a><center>第二章 MyBatis 框架快速入门</center></h1><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><p><strong>使用 Mybatis 准备</strong></p><blockquote><p>下载 mybatis<br><a href="https://github.com/mybatis/mybatis-3/releases" target="_blank" rel="noopener">https://github.com/mybatis/mybatis-3/releases</a></p></blockquote><p><strong>搭建 MyBatis 开发环境</strong></p><ol><li><p>创建 mysql 数据库和相关的表</p> <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span> (</span><br><span class="line"> <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line"> <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line"> <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line"> <span class="string">`age`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line"> PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure></li><li><p>创建 maven 工程 </p><p> <img src="/blog-img/Mybatis/pasted-4.png" alt="upload successful"></p></li><li><p>加入依赖和插件</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    对于MAVEN项目，Eclipse会自动把项目src\main\java\目录下的配置文件（.xml）和</span></span><br><span class="line"><span class="comment">    资源文件(.properties)搬运到target目录下，而intellij idea默认是不会帮我们做这件事的,</span></span><br><span class="line"><span class="comment">    所以需要加以下配置</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--所在的目录--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span><span class="comment">&lt;!--包括目录下的.properties,.xml 文件都会扫描到--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--编译时跳过单元测试--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>编写 Student 实体类<br> 在domain包下创建</p> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="comment">//属性名和列名一样 </span></span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> String email;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="comment">// set ,get , toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编写 Dao 接口 StudentDao<br> 在dao包下创建</p>   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDao</span> </span>&#123;</span><br><span class="line"><span class="comment">/*查询所有数据*/</span></span><br><span class="line">  <span class="function">List&lt;Student&gt; <span class="title">selectStudents</span><span class="params">()</span></span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>编写 Dao 接口 Mapper 映射文件 StudentDao.xml</p><p>要求：</p><ol><li><p>在 dao 包中创建文件 StudentDao.xml</p></li><li><p>要 StudentDao.xml 文件名称和接口 StudentDao 一样，区分大小写。</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">    <span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">             namespace：必须有值，自定义的唯一字符串 </span></span><br><span class="line"><span class="comment">             推荐使用：dao 接口的全限定名称 </span></span><br><span class="line"><span class="comment">        --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.test.dao.StudentDao"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            &lt;select&gt;: 查询数据， 标签中必须是 select 语句</span></span><br><span class="line"><span class="comment">            id: sql 语句的自定义名称，推荐使用 dao 接口中方法名称， </span></span><br><span class="line"><span class="comment">            使用名称表示要执行的 sql 语句</span></span><br><span class="line"><span class="comment">            resultType: 查询语句的返回结果数据类型，使用全限定类名 </span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudents"</span> <span class="attr">resultType</span>=<span class="string">"com.test.domain.Student"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--要执行的 sql 语句--&gt;</span></span><br><span class="line">            select id,name,email,age from student</span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>创建 MyBatis 主配置文件</p><p>项目 src/main 下创建 resources 目录，设置 resources 目录为 resources root<br>创建主配置文件：名称为 mybatis.xml<br>说明：主配置文件名称是自定义的，内容如下：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 mybatis 环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--id:数据源的名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置事务类型：使用 JDBC 事务（使用 Connection 的提交和回滚）--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据源 dataSource：创建数据库 Connection 对象</span></span><br><span class="line"><span class="comment">                type: POOLED 使用数据库的连接池 </span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--连接数据库的四个要素--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/mydbtest?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf-8<span class="symbol">&amp;amp;</span>serverTimezone=GMT"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--告诉 mybatis 要执行的 sql 语句的位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com\test\mapper\StudentMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>创建测试类 MyBatisTest</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStart</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">     String config = <span class="string">"mybatis-config.xml"</span>;<span class="comment">//1.mybatis 主配置文件 </span></span><br><span class="line"></span><br><span class="line">     InputStream in = Resources.getResourceAsStream(config); <span class="comment">//2.读取配置文件 </span></span><br><span class="line"></span><br><span class="line">     SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);<span class="comment">//3.创建 SqlSessionFactory 对象,目的是获取 SqlSession </span></span><br><span class="line"></span><br><span class="line">     SqlSession session = factory.openSession(); <span class="comment">//4.获取 SqlSession,SqlSession 能执行 sql 语句</span></span><br><span class="line"></span><br><span class="line">     List&lt;Student&gt; studentList =session.selectList(<span class="string">"com.test.dao.StudentDao.selectStudents"</span>);<span class="comment">//5.执行 SqlSession 的 selectList("namespace.id")</span></span><br><span class="line"></span><br><span class="line">     studentList.forEach( student -&gt; System.out.println(student)); <span class="comment">//6.循环输出查询结果 </span></span><br><span class="line"></span><br><span class="line">     session.close();<span class="comment">//7.关闭 SqlSession，释放资源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>配置日志功能</p><p>mybatis.xml 文件加入日志配置，可以在控制台输出执行的 sql 语句和参数</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="基本的-CURD"><a href="#基本的-CURD" class="headerlink" title="基本的 CURD"></a>基本的 CURD</h2><blockquote><p>insert ,update ,delete , selectOne（查询一个）</p></blockquote><h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><ol><li><p>StudentDao 接口中增加方法</p><p>  <code>int insertStudent(Student student);</code></p></li><li><p>StudentDao.xml 加入 sql 语句</p>  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertStudent"</span>&gt;</span></span><br><span class="line"> insert into student(id,name,email,age) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;age&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>增加测试方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       </span><br><span class="line">        String config = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">        InputStream in =Resources.getResourceAsStream(config);</span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line"></span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">1005</span>);</span><br><span class="line">        student.setName(<span class="string">"张三"</span>);</span><br><span class="line">        student.setEmail(<span class="string">"zhangsan@163.com"</span>);</span><br><span class="line">        student.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="comment">//执行插入 insert</span></span><br><span class="line">       <span class="keyword">int</span> rows =session.insert(<span class="string">"com.test.dao.StudentDao.insertStudent"</span>,student);</span><br><span class="line">        <span class="comment">//MyBatis默认情况下是手动提交事务</span></span><br><span class="line">        session.commit();</span><br><span class="line">        System.out.println(<span class="string">"增加记录的行数:"</span>+rows);</span><br><span class="line">        <span class="comment">//8.关闭 SqlSession</span></span><br><span class="line">        session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="…"><a href="#…" class="headerlink" title="…"></a>…</h3><pre><code>删改查操作类似，只需要在mapper文件中写sql语句就可以了</code></pre><h2 id="主要类的介绍"><a href="#主要类的介绍" class="headerlink" title="主要类的介绍"></a>主要类的介绍</h2><ol><li><p><strong>Resources</strong>： mybatis中的一个类， 负责读取主配置文件</p><pre><code>InputStream in = Resources.getResourceAsStream(&quot;mybatis.xml&quot;); </code></pre></li><li><p><strong>SqlSessionFactoryBuilder</strong>: 创建SqlSessionFactory对象</p><pre><code>SqlSessionFactoryBuilder builder  = new SqlSessionFactoryBuilder();//创建SqlSessionFactory对象 SqlSessionFactory factory = builder.build(in); </code></pre></li><li><p><strong>SqlSessionFactory</strong> ：重量级对象，程序创建一个对象耗时比较长，使用资源    比较多。在整个项目中，有一个就够用了。<br> SqlSessionFactory: 接口实现类：DefaultSqlSessionFactory<br>SqlSessionFactory作用：获取SqlSession对象, SqlSession sqlSession = factory.openSession()<br> openSession()方法说明：</p><pre><code>1. openSession()：无参数的，获取是非自动提交事务的SqlSession对象2. openSession(boolean):         openSession(true) 获取自动提交事务的SqlSession.         openSession(false) 非自动提交事务的SqlSession对象</code></pre></li></ol><ol start="4"><li><p><strong>SqlSession</strong>: </p><p> SqlSession接口 ：定义了操作数据的方法 例如 selectOne() ,selectList() ,insert(),update(), delete(), commit(), rollback()</p><pre><code>SqlSession接口的实现类DefaultSqlSession。</code></pre><p>  使用要求： SqlSession对象不是线程安全的，需要在方法内部使用， 在执行sql语句之前，使用openSession()获取SqlSession对象。</p><pre><code>在执行完sql语句后，需要关闭它，执行SqlSession.close(). 这样能保证他的使用是线程安全的。</code></pre></li></ol><h2 id="传统-Dao-开发方式的分析"><a href="#传统-Dao-开发方式的分析" class="headerlink" title="传统 Dao 开发方式的分析"></a>传统 Dao 开发方式的分析</h2><blockquote><p>Dao 的实现类其实并没有干什么实质性的工作，它仅仅就是通过 SqlSession 的相关 API 定位到映射文件 mapper 中相应 id 的 SQL 语句，真正对 DB 进行操作的工作其实是由框架通过 mapper 中的 SQL 完成的。</p></blockquote><blockquote><p>所以，MyBatis 框架就抛开了 Dao 的实现类，直接定位到映射文件 mapper 中的相应 SQL 语句，对DB 进行操作。这种对 Dao 的实现方式称为 Mapper 的动态代理方式。</p></blockquote><blockquote><p>Mapper 动态代理方式无需程序员实现 Dao 接口。接口是由 MyBatis 结合映射文件自动生成的动态代<br>理实现的。</p></blockquote><h1 id="第3章-MyBatis-框架-Dao-代理"><a href="#第3章-MyBatis-框架-Dao-代理" class="headerlink" title="第3章 MyBatis 框架 Dao 代理"></a><center>第3章 MyBatis 框架 Dao 代理</center></h1><h2 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h2><ul><li><p>使用SqlSession.getMapper(dao接口.class) 获取这个dao接口的对象</p><p> <code>SqlSession session = factory.openSession();</code><br>  <code>StudentDao dao = session.getMapper(StudentDao.class);</code></p><p> 得到的是MapperProxy 对象（具体看源码）</p></li></ul><p><img src="/blog-img/Mybatis/pasted-5.png" alt="upload successful"></p><h2 id="传入参数-了解"><a href="#传入参数-了解" class="headerlink" title="传入参数(了解)"></a>传入参数(了解)</h2><p><strong>从java代码中把数据传入到mapper文件的sql语句中。</strong></p><ol><li><p><strong>parameterType</strong> ：<br> 写在mapper文件中的 一个属性。 表示dao接口中方法的参数的数据类型。</p> <div class="note warning">            <p>mapper文件中 parameterType一般省略不写，mybatis能自动识别。</p>          </div> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;select&gt;中parameterType可以不写</span></span><br><span class="line"><span class="comment">                  resultType必须有</span></span><br><span class="line"><span class="comment">        &lt;insert&gt;&lt;update&gt;&lt;delete&gt;中通常只写 id 属性</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectById"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.String"</span> <span class="attr">resultType</span>=<span class="string">"com.test.domain.Student"</span>&gt;</span></span><br><span class="line">    select * from t_student where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p><strong>一个简单类型的参数</strong>：</p><p> 简单类型： mybatis把java的<strong>基本数据类型</strong>和<strong>String</strong>都叫简单类型。<br> 在mapper文件获取简单类型的一个参数的值，使用 #{<strong>任意字符</strong>}</p><p> <strong>接口</strong>：<code>public Student  selectStudentById(Integer id)</code><br> <strong>mapper</strong>:<code>select id,name, email,age from student where id=#{studentId}</code></p></li><li><p><strong>多个参数，使用java对象</strong></p><pre><code>vo: value object , 放一些存储数据的类。比如说 提交请求参数， name ,age 现在想把name ,age 传给一个service 类。vo: view object , 从servlet把数据返回给浏览器使用的类，表示显示结果的类。pojo: 普通的有set， get方法的java类。 普通的java对象Servlet --- StudentService( addStudent( MyParam  param)  )entity（domain域）: 实体类， 和数据库中的表对应的类</code></pre><p> <em>语法 #{对象中的属性名}</em></p><p> <strong>接口方法</strong>：<br> <code>List&lt;Student&gt; find(Student s)</code><br> <strong>mapper 文件</strong>：<br> <code>&lt;select id=&quot;addStu&quot; &gt;</code><br> <code>select id,name,email,age from student where name=#{sname} or age = #{sage}</code><br> <code>&lt;/select&gt;</code></p></li><li><p><strong>多个参数，使用Map</strong></p><p>Map 集合可以存储多个值，使用Map向 mapper 文件一次传入多个参数。Map 集合使用 String的 key，<br>Object 类型的值存储参数。 mapper 文件使用 # { key } 引用参数值。</p><p>例如：<br><code>Map&lt;String,Object&gt; data = new HashMap&lt;String,Object&gt;();</code><br><code>data.put(“myname”,”李力”);</code><br><code>data.put(“myage”,20);</code><br><strong>接口方法</strong>：<br><code>List&lt;Student&gt; selectMultiMap(Map&lt;String,Object&gt; map);</code><br><strong>mapper 文件</strong>：<br><code>&lt;select id=&quot;selectMultiMap&quot; resultType=&quot;com.test.domain.Student&quot;&gt;</code><br><code>select id,name,email,age from student where name=#{myname} or age =#{myage}</code><br><code>&lt;/select&gt;</code></p></li><li><p><strong>#{}和${}区别</strong></p><ul><li><p><strong>#</strong>使用 <code>？</code>在sql语句中做站位的， 使用PreparedStatement执行sql，效率高</p></li><li><p><strong>#</strong>能够避免sql注入，更安全。</p></li><li><p><strong>$</strong>不使用占位符，是字符串连接方式，使用Statement对象执行sql，效率低</p></li><li><p><strong>$</strong>有sql注入的风险，缺乏安全性。</p></li><li><p><strong>$</strong>:可以替换表名或者列名</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">select</span> <span class="keyword">id</span> , <span class="keyword">name</span>, email , age <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">id</span> = <span class="string">'#'</span>&#123;studentId&#125;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">#&#123;&#125; 的结果： select id , name, email , age from student where id = ? </span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> <span class="keyword">id</span> , <span class="keyword">name</span>, email , age <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">id</span> = $ &#123;studentId&#125;</span><br><span class="line"></span><br><span class="line"> $&#123;&#125; 的结果：</span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">id</span> , <span class="keyword">name</span> , email , age <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">id</span> =<span class="number">1001</span></span><br><span class="line">相当于：</span><br><span class="line">  <span class="keyword">String</span> <span class="keyword">sql</span>=<span class="string">"select id ,name , email ,age from student where id="</span> + <span class="string">"1001"</span>;</span><br><span class="line"> </span><br><span class="line"> $:可以替换表名或者列名， 你能确定数据是安全的。可以使用$</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="mybatis的输出结果"><a href="#mybatis的输出结果" class="headerlink" title="mybatis的输出结果"></a>mybatis的输出结果</h2><ul><li>mybatis执行了sql语句，得到java对象。</li></ul><h3 id="resultType"><a href="#resultType" class="headerlink" title="resultType"></a>resultType</h3><ol><li><p>指sql语句执行完毕后,数据转为的java对象,java类型是任意的。<br>resultType结果类型的它值 (1)类型的全限定名称 (2)类型的别名， 例如 java.lang.Integer别名是int</p><p> <strong>处理方式：</strong></p><ol><li><p>mybatis执行sql语句， 然后mybatis调用类的无参数构造方法，创建对象。</p></li><li><p>mybatis把ResultSet指定列值付给同名的属性。<br><code>&lt;select id=&quot;selectMultiPosition&quot; resultType=&quot;com.bjpowernode.domain.Student&quot;&gt;</code><br><code>select id,name, email,age from student</code><br><code>&lt;/select&gt;</code></p><p>对等的jdbc:<br>ResultSet rs = executeQuery(“ select id,name, email,age from student” )<br> while(rs.next()){</p><pre><code>Student  student = new Student();student.setId(rs.getInt(&quot;id&quot;));student.setName(rs.getString(&quot;name&quot;))</code></pre><p>}</p></li></ol></li><li><p>定义自定义类型的别名</p><ol><li>在mybatis主配置文件中定义，使<code>&lt;typeAlias&gt;</code>定义别名</li><li>可以在resultType中使用自定义别名<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--为mapper映射文件中的domain起别名--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--&lt;typeAlias type="com.test.domain.Student" alias="stu" /&gt;--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--package 批量起别名 系统取好了，别名为类名（区分大小写）--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.test.domain"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap:"></a>resultMap:</h3><ul><li><p>结果映射， 指定列名和java对象的属性对应关系。</p><ol><li><p>你自定义列值赋值给哪个属性</p></li><li><p>当你的列名和属性名不一样时，一定使用resultMap</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">数据库表不变，现在有一个类属性名和字段对应不上的情况</span></span><br><span class="line"><span class="comment">type：指定一个类型，与数据库表一一对应，建立起表字段和类属性的名字一一匹配的关系</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"stuMap"</span> <span class="attr">type</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">id:定义主键</span></span><br><span class="line"><span class="comment">property:类中的属性名</span></span><br><span class="line"><span class="comment">column: 表中的字段名</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"sid"</span> <span class="attr">column</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sname"</span> <span class="attr">column</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sage"</span> <span class="attr">column</span>=<span class="string">"age"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll2"</span> <span class="attr">resultMap</span>=<span class="string">"stuMap"</span>&gt;</span></span><br><span class="line">select * from t_student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>resultMap和resultType不要一起用，二选一</p></li></ul><h1 id="第4章-MyBatis-框架动态-SQL"><a href="#第4章-MyBatis-框架动态-SQL" class="headerlink" title="第4章 MyBatis 框架动态 SQL"></a><center>第4章 MyBatis 框架动态 SQL</center></h1><h2 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h2><blockquote><p>sql的内容是变化的，可以根据条件获取到不同的sql语句。<strong>主要是where部分发生变化。</strong></p></blockquote><p><strong>动态sql的实现:</strong> 使用mybatis提供的标签，<code>&lt;if&gt; ,&lt;where&gt;,&lt;foreach&gt;</code></p><ol><li><p><code>&lt;if&gt;</code>是判断条件的，语法</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"判断java对象的属性值"</span>&gt;</span></span><br><span class="line">           部分sql语句</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>&lt;where&gt;</code>用来包含 多个<code>&lt;if&gt;</code>的,当多个if有一个成立的,<code>&lt;where&gt;</code>会自动增加一个where关键字,并去掉 if中多余的 and ,or等。</p> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"find"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">       select * from t_student</span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           where搭配if标签使用  通过if标签来判断</span></span><br><span class="line"><span class="comment">           如果查询条件不匹配 则不在sql中加where关键字</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           where 忽略第一个and</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name!=null and name!=''"</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--'%'中间加空格--&gt;</span></span><br><span class="line">               and name like '%' #&#123;name&#125; '%'</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"address!=null and address!=''"</span>&gt;</span></span><br><span class="line">               and address like '%' #&#123;address&#125; '%'</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>&lt;foreach&gt;</code> 循环java中的数组，list集合的。 主要用在sql的in语句中。</p><p> <code>&lt;foreach collection=&quot;&quot; item=&quot;&quot; open=&quot;&quot; close=&quot;&quot; separator=&quot;&quot;&gt;</code><br> <code>#{xxx}</code><br> <code>&lt;/foreach&gt;</code></p><blockquote><p>collection:表示接口中的方法参数的类型， 如果是数组使用array , 如果是list集合使用list<br>   item:自定义的，表示数组和集合成员的变量<br>   open:循环开始时的字符<br>   close:循环结束时的字符<br>   separator:集合成员之间的分隔符</p></blockquote><p> 例如：学生id是 1001,1002,1003的三个学生<br>  select * from student where id in (1001,1002,1003)</p><figure class="highlight xml"><figcaption><span>java</span></figcaption><table><tr><td class="code"><pre><span class="line">public List<span class="tag">&lt;<span class="name">Student</span>&gt;</span> selectByidS(List<span class="tag">&lt;<span class="name">Integer</span>&gt;</span> idlist)</span><br><span class="line"></span><br><span class="line">List<span class="tag">&lt;<span class="name">Integer</span>&gt;</span> list = new ...</span><br><span class="line">list.add(1001);</span><br><span class="line">list.add(1002);</span><br><span class="line">list.add(1003);</span><br><span class="line"></span><br><span class="line">dao.selectByids(list)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByIds"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">      select * from t_student</span><br><span class="line">      where id in</span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">          #&#123;id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>sql代码片段,就是复用一些语法,代替重复性高，且复杂的子查询</p><p> 步骤<br> 1.先定义 <code>&lt;sql id=&quot;自定义名称唯一&quot;&gt;  sql语句， 表名，字段等 &lt;/sql&gt;</code><br> 2.再使用，<code>&lt;include refid=&quot;id的值&quot; /&gt;</code></p> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> &gt;</span></span><br><span class="line">   select * from t_student</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectById3"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"selectAll"</span> /&gt;</span> where id=#&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>一般不用  会减低代码可读性</li></ul></li><li><p>… </p></li></ol><h1 id="第5章-MyBatis-配置文件（掌握）"><a href="#第5章-MyBatis-配置文件（掌握）" class="headerlink" title=" 第5章 MyBatis 配置文件（掌握）"></a><center> 第5章 MyBatis 配置文件（掌握）</center></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用配置文件加载数据库连接属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;settings&gt;</span></span><br><span class="line"><span class="comment">        &lt;setting name="" value=""/&gt;</span></span><br><span class="line"><span class="comment">    &lt;/settings&gt;</span></span><br><span class="line"><span class="comment">    设置与数据库交互环境</span></span><br><span class="line"><span class="comment">        例如可以在此处配置二级缓存，配置查询延迟加载策略等等。。</span></span><br><span class="line"><span class="comment">            配置的目的是为了更有效的查询表中的记录</span></span><br><span class="line"><span class="comment">            实际开发中基本没用 效果不明显 现在有其他策略</span></span><br><span class="line"><span class="comment">            基础操作</span></span><br><span class="line"><span class="comment">                对于常用的查询条件的字段，设置索引</span></span><br><span class="line"><span class="comment">            高级操作</span></span><br><span class="line"><span class="comment">                使用nosql数据库，redis</span></span><br><span class="line"><span class="comment">            专业操作</span></span><br><span class="line"><span class="comment">                Elasticsearch与Solr 针对于电商行业</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--为mapper映射文件中的domain起别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;typeAlias type="com.test.domain.Student" alias="stu" /&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--package 批量起别名 系统取好了，别名为类名（区分大小写）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.test.domain"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 mybatis 环境--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--id:数据源的名称--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--配置事务类型：使用 JDBC 事务（使用 Connection 的提交和回滚）--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--数据源 dataSource：创建数据库 Connection 对象</span></span><br><span class="line"><span class="comment">                  type: POOLED 使用数据库的连接池 </span></span><br><span class="line"><span class="comment">              --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!--通配符读取配置文件，连接数据库的四个要素--&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource="com\test\dao\StudentDao.xml"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper class="com.test.dao.StudentDao" /&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--该包下的mapper映射文件自动注册--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.test.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="第6章-扩展"><a href="#第6章-扩展" class="headerlink" title="第6章 扩展"></a><center>第6章 扩展</center></h1>]]></content>
      
      
      <categories>
          
          <category> java框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> java框架 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单元测试执行多次，导致插入数据重复</title>
      <link href="/posts/javaError2/"/>
      <url>/posts/javaError2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\css\APlayer.min.css"><script src="\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\js\Meting.min.js"></script><p><strong>问题：在用单元测试代码时，重复执行，导致向数据库插入两次数据。</strong></p><p><strong>原因：单元测试时会先build进行编译，而build的时候会执行你项目中的所有加了@Test的方法。</strong></p><p><img src="/blog-img/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E9%87%8D%E5%A4%8D.jpg" alt="Alt text"></p><p><strong>解决：通过在pom.xml配置文件进行配置。</strong></p><blockquote><p><code>&lt;build&gt;</code><br>&emsp; <code>&lt;plugins&gt;</code><br>&emsp;&emsp;<code>&lt;plugin&gt;</code><br>&emsp;&emsp;&emsp;<code>&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</code><br>&emsp;&emsp;&emsp; <code>&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</code><br>&emsp;&emsp;&emsp;<code>&lt;configuration&gt;</code><br>&emsp;&emsp;&emsp;&emsp;  <code>&lt;skipTests&gt;true&lt;/skipTests&gt;</code><br>&emsp;&emsp;&emsp;  <code>&lt;/configuration&gt;</code><br>&emsp;&emsp; <code>&lt;/plugin&gt;</code><br>&emsp; <code>&lt;/plugins&gt;</code><br><code>&lt;/build&gt;</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 问题集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 问题集 </tag>
            
            <tag> junit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>idea-Error(3, 32) java程序包不存在的问题</title>
      <link href="/posts/javaError1/"/>
      <url>/posts/javaError1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\css\APlayer.min.css"><script src="\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\js\Meting.min.js"></script><p><strong>问题：用maven配置，新建项目编译时提示以下错误信息：</strong><br><code>java: 程序包org.springframework.context不存在</code><br><code>java: 程序包org.springframework.context.support不存在</code></p><p><strong>原因：idea的Maven有没有勾选，没有的话勾上，然后ok，运行一下项目，等加载完成就ok了。不勾选的，项目是用IDEA实现的没有链到Maven，所以会出现包不存在。</strong></p><p><strong>解决：ctrl+shift+S 打开设置勾选</strong><br><img src="/blog-img/javaError2.png" alt="Alt text"></p>]]></content>
      
      
      <categories>
          
          <category> 问题集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 问题集 </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown基础语法</title>
      <link href="/posts/Markdown/"/>
      <url>/posts/Markdown/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\css\APlayer.min.css"><script src="\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\js\Meting.min.js"></script><h1 id="认识Markdown"><a href="#认识Markdown" class="headerlink" title="认识Markdown"></a>认识Markdown</h1><blockquote><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。<br>Markdown具有一系列衍生版本，用于扩展Markdown的功能（如表格、脚注、内嵌HTML等等），这些功能原初的Markdown尚不具备，它们能让Markdown转换成更多的格式，例如LaTeX，Docbook。</p></blockquote><p>简单来说，一般我们用的字处理软件Word或Pages有大量的排版、字体设置，而Markdown是个非常容易学习的排版语法。</p><p>Markdown 的优点如下：</p><ul><li>纯文本，所以兼容性极强，可以用所有文本编辑器打开。</li><li>让你专注于文字而不是排版。</li><li>格式转换方便，Markdown 的文本你可以轻松转换为 html、电子书等。</li><li>Markdown 的标记语法有极好的可读性。</li></ul><h1 id="Markdown编辑工具"><a href="#Markdown编辑工具" class="headerlink" title="Markdown编辑工具"></a>Markdown编辑工具</h1><p>推荐新手使用<a href="https://maxiang.io/" target="_blank" rel="noopener">马克飞象 </a>编辑器，对新手极其友好。</p><p><img src="/blog-img/Markdown/1590415731146.png" alt="Alt text"></p><p>热爱编程和码字博客主也可以选择<a href="https://www.cnblogs.com/xueweihan/archive/2019/10/24/11728087.html" target="_blank" rel="noopener">这五款免费的Markdown编辑器</a></p><h1 id="Markdown语法"><a href="#Markdown语法" class="headerlink" title="Markdown语法"></a>Markdown语法</h1><h2 id="1-标题"><a href="#1-标题" class="headerlink" title="1. 标题"></a>1. 标题</h2><p>标题能显示出文章的结构。行首插入1-6个 # ，每增加一个 # 表示更深入层次的内容，对应到标题的深度由 1-6 阶。<strong>注意：需要在 # 后加一个空格，这是最标准的Markdown语法。</strong></p><p><img src="/blog-img/Markdown/1590417132717.png" alt="Alt text"></p><h2 id="2-文本样式"><a href="#2-文本样式" class="headerlink" title="2.文本样式"></a>2.文本样式</h2><p>（带“*”星号的文本样式，在原版Markdown标准中不存在，但在其大部分衍生标准中被添加）</p><p><img src="/blog-img/Markdown/1590417166411.png" alt="Alt text"></p><p>补充：markdowm首行缩进方法–一个空格<code>&amp;ensp;</code> 两个空格 <code>&amp;emsp;</code></p><h2 id="3-图片"><a href="#3-图片" class="headerlink" title="3.图片"></a>3.图片</h2><p>插入图片的语法就是在插入链接的语法前面加’!’。</p><p>插入网络上已存在的图片可以使用图床，这里推荐<a href="https://imgchr.com" target="_blank" rel="noopener">路过图床</a> ，生成URL地址即可。<strong>（以下使用马克飞象快捷键）</strong></p><p><img src="/blog-img/Markdown/1590418153960.png" alt="Alt text"></p><h2 id="4-注释"><a href="#4-注释" class="headerlink" title="4.注释"></a>4.注释</h2><ul><li><p><strong>html注释</strong></p><p>Markdown内嵌html语法，所以可以用html注释。</p><blockquote><p><code>&lt;!--哈哈我是注释，不会在浏览器中显示。--&gt;</code></p></blockquote></li><li><p><strong>hack方法</strong><br>hack方法就是利用markdown的解析原理来实现注释的。</p><blockquote><p><code>[comment]: &lt;&gt; (注释，不会在浏览器中显示。)</code><br><code>[comment]: &lt;&gt; (哈哈我是注释，不会在浏览器中显示。)</code><br><code>[comment]: &lt;&gt; (哈哈我是注释，不会在浏览器中显示。)</code><br><code>[//]: &lt;&gt; (哈哈我是注释，不会在浏览器中显示。)</code><br><code>[//]: # (哈哈我是注释，不会在浏览器中显示。)</code><br>可以用表情包形式注释，例如<br><code>[*_*]: 注释内容</code><br><code>[^_^]: 其中[]中的内容可以自定义</code><br><code>[@_@]: 但是这个注释在代码段中无效，只能在外部使用</code></p></blockquote></li></ul><h2 id="5-脚注"><a href="#5-脚注" class="headerlink" title="5.脚注"></a>5.脚注</h2><p> 脚注一般位于页面的底部，可以作为文档某处内容的注释.</p><blockquote><p>这里是脚注[^脚注]<br>[^脚注]: 这里是脚注的内容，”脚注”可以替换成数字或字母.</p></blockquote><h2 id="6-表格"><a href="#6-表格" class="headerlink" title="6.表格"></a>6.表格</h2><p> 表格的语法麻烦一点</p><p><code>| 测试  |   测试     | 测试   |</code><br><code>| :------- | :-------:| ----: |</code><br><code>|</code>:<code>表示左对齐|</code>::<code>表示居中 |</code>:<code>表示右对齐|</code></p><p>效果：</p><table><thead><tr><th align="left">测试</th><th align="center">测试</th><th align="right">测试</th></tr></thead><tbody><tr><td align="left"><code>:</code>表示左对齐</td><td align="center"><code>::</code>表示居中</td><td align="right"><code>:</code> 表示右对齐</td></tr></tbody></table><h2 id="7-流程图"><a href="#7-流程图" class="headerlink" title="7.流程图"></a>7.流程图</h2><p><img src="/blog-img/Markdown/1590424467082.png" alt="Alt text"></p><p>以及时序图:</p><p><img src="/blog-img/Markdown/1590424554284.png" alt="Alt text"></p><h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>看到这里你应该熟悉了Markdown 的基本语法啦，然后可以去这个在线<a href="https://daringfireball.net/projects/markdown/dingus" target="_blank" rel="noopener">markdown-html在线转换上</a>练习，不用一小时就可以掌握了。</p>]]></content>
      
      
      <categories>
          
          <category> 编辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 轻量级标记语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HelloWorld</title>
      <link href="/posts/Myblog/"/>
      <url>/posts/Myblog/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\css\APlayer.min.css"><script src="\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\js\Meting.min.js"></script><h1 id="我的第一个-博客！！！"><a href="#我的第一个-博客！！！" class="headerlink" title="我的第一个 博客！！！"></a>我的第一个 博客！！！</h1><p>使用hexo admin 快速部署博客<br><img src="/blog-img/pasted-0.png" alt="upload successful"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[language] [title] [url] [link text]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
