<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Spring | JInterest</title><meta name="description" content="第1章 Spring概述sping简述 一个轻量级框架，核心技术是ioc，aop，针对接口编程，实现解耦合。  一个容器，储存java对象的容器，需要做的是把对象放入到容器中  方便集成各种优秀框架  Spring 不排斥各种优秀的开源框架，相反 Spring 可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如 Struts,Hibernate、MyBatis）等的直接支持。简化框架"><meta name="keywords" content="java框架,Spring"><meta name="author" content="啊俊"><meta name="copyright" content="啊俊"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Spring"><meta name="twitter:description" content="第1章 Spring概述sping简述 一个轻量级框架，核心技术是ioc，aop，针对接口编程，实现解耦合。  一个容器，储存java对象的容器，需要做的是把对象放入到容器中  方便集成各种优秀框架  Spring 不排斥各种优秀的开源框架，相反 Spring 可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如 Struts,Hibernate、MyBatis）等的直接支持。简化框架"><meta name="twitter:image" content="https://s1.ax1x.com/2020/05/25/tp0G9S.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Spring"><meta property="og:url" content="http://jinterest.github.io/posts/Spring/"><meta property="og:site_name" content="JInterest"><meta property="og:description" content="第1章 Spring概述sping简述 一个轻量级框架，核心技术是ioc，aop，针对接口编程，实现解耦合。  一个容器，储存java对象的容器，需要做的是把对象放入到容器中  方便集成各种优秀框架  Spring 不排斥各种优秀的开源框架，相反 Spring 可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如 Struts,Hibernate、MyBatis）等的直接支持。简化框架"><meta property="og:image" content="https://s1.ax1x.com/2020/05/25/tp0G9S.jpg"><meta property="article:published_time" content="2020-05-31T16:00:00.000Z"><meta property="article:modified_time" content="2020-06-01T04:37:17.459Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://jinterest.github.io/posts/Spring/"><link rel="prev" title="JSTL标签不起作用" href="http://jinterest.github.io/posts/jstl/"><link rel="next" title="Mybatis" href="http://jinterest.github.io/posts/Mybatis/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"胸有成竹,竹报平安,安富尊荣,荣华富贵,贵而贱目,目无余子,子虚乌有,有目共睹,睹物思人,人中骐骥,骥子龙文,文质彬彬,彬彬有礼,礼贤下士,士饱马腾,腾云驾雾,雾里看花,花言巧语,语重心长,长此以往,往返徒劳,劳而无功,功成不居,居官守法,法外施仁,仁浆义粟,粟红贯朽,朽木死灰,灰飞烟灭,灭绝人性,性命交关,关门大吉,吉祥止止,止于至善,善贾而沽,沽名钓誉,誉不绝口,口蜜腹剑,剑戟森森,森罗万象,象箸玉杯,杯弓蛇影,影影绰绰,绰约多姿,姿意妄为,为人作嫁,嫁祸于人,人情冷暖,暖衣饱食,食不果腹,腹背之毛,毛手毛脚,脚踏实地,地老天荒,荒诞不经,经纬万端,端倪可察,察言观色,色若死灰,灰头土面,面有菜色,色授魂与,与民更始,始乱终弃,弃瑕录用,用舍行藏,藏垢纳污,污泥浊水,水乳交融,融会贯通,通宵达旦,旦种暮成,成人之美,美人迟暮,暮云春树,树大招风,风中之烛,烛照数计,计日程功,功德无量,量才录用,用行舍藏,藏头露尾,尾大不掉,掉以轻心,心急如焚,焚琴煮鹤,鹤发童颜,颜面扫地,地上天官,官逼民反,反裘负刍,刍荛之见,见微知著,著作等身,身强力壮,壮志凌云,云消雨散,散兵游勇,勇猛精进,进退失据,据理力争,争长论短,短小精悍,悍然不顾,顾影自怜,怜香惜玉,玉液琼浆,浆酒霍肉,肉薄骨并,并行不悖,悖入悖出,出奇制胜,胜任愉快,快马加鞭,鞭辟入里,里出外进,进寸退尺,尺寸可取,取巧图便,便宜行事,事与愿违,违心之论,论功行赏,赏心悦目,目光如豆,豆蔻年华,华而不实,实事求是,是古非今,今愁古恨,恨之入骨,骨腾肉飞,飞沿走壁,壁垒森严,严阵以待,待理不理,理屈词穷,穷原竟委,委曲求全,全力以赴,赴汤蹈火,火烧火燎,燎原烈火,火烧眉毛,毛羽零落,落井下石,石破天惊,惊惶失措,措置裕如,如运诸掌,掌上明珠,珠沉玉碎,碎琼乱玉,玉碎珠沉,沉滓泛起,起早贪黑,黑更半夜,夜雨对床,床头金尽,尽态极妍,妍姿艳质,质疑问难,难以为继,继往开来,来龙去脉,脉脉含情,情见势屈,屈打成招,招摇过市,市井之徒,徒劳往返,返老还童,童牛角马,马首是瞻,瞻前顾后,后顾之忧,忧国奉公,公子王孙,孙康映雪,雪上加霜,霜露之病,病病歪歪,歪打正着,着手成春,春蚓秋蛇,蛇口蜂针,针锋相对,对薄公堂,堂堂正正,正中下怀,怀璧其罪,罪大恶极,极天际地,地丑德齐,齐心协力,力不胜任,任重道远,远见卓识,识文断字,字斟句酌,酌盈剂虚,虚舟飘瓦,瓦釜雷鸣,鸣锣开道,道不拾遗,遗大投艰,艰苦朴素,素丝羔羊,羊肠小道,道听途说,说长道短,短兵相接,接踵而至,至死不变,变本加厉,厉行节约,约定俗成,成仁取义,义形于色,色色俱全,全军覆灭,灭此朝食,食日万钱,钱可通神,神施鬼设,设身处地,地平天成,成年累月,月白风清,清净无为,为期不远,远交近攻,攻其无备,备多力分,分寸之末,末学肤受,受宠若惊,惊涛骇浪,浪子回头,头疼脑热,热火朝天,天高地厚,厚貌深情,情同骨肉,肉眼惠眉,眉来眼去,去伪存真,真脏实犯,犯上作乱,乱头粗服,服低做小,小试锋芒,芒刺在背,背井离乡,乡壁虚造,造化小儿,儿女情长,长歌当哭,哭天抹泪,泪干肠断,断鹤续凫,凫趋雀跃,跃然纸上,上树拔梯,梯山航海,海枯石烂,烂若披锦,锦绣前程,程门立雪,雪虐风饕,饕餮之徒,徒劳无功,功败垂成,成千上万,万象森罗,罗雀掘鼠,鼠窃狗盗,盗憎主人,人莫予毒,毒手尊前,前因后果,果于自信,信赏必罚,罚不当罪,罪恶昭彰,彰善瘅恶,恶贯满盈,盈科后进,进退两难,难分难解,解甲归田,田月桑时,时和年丰,丰取刻与,与世偃仰,仰人鼻息,息息相通,通权达变,变化无穷,穷途末路,路不拾遗,遗臭万年,年深日久,久悬不决,决一死战,战天斗地,地利人和,和而不唱,唱筹量沙,沙里淘金,金屋藏娇,娇生惯养,养精畜锐,锐不可当,当头棒喝,喝西北风,风雨同舟,舟中敌国,国色天香,香火因缘,缘木求鱼,鱼龙混杂,杂七杂八,八拜之交,交头接耳,耳鬓斯磨,磨砖成镜,镜花水月,月旦春秋,秋高气爽,爽然若失,失惊打怪,怪诞不经,经久不息,息事宁人,人言啧啧,啧有烦言,言必有中,中庸之道,道路以目,目瞪口呆,呆头呆脑,脑满肠肥,肥马轻裘,裘弊金尽,尽力而为,为富不仁,仁至义尽,尽心竭力,力透纸背,背道而驰,驰名中外,外合里差,差强人意,意在言外,外圆内方,方底圆盖,盖世无双,双管齐下,下车伊始,始终如一,一蹶不振,振臂一呼,呼风唤雨,雨沐风餐,餐风露宿,宿弊一清,清心寡欲,欲取姑予,予取予求,求神问卜,卜昼卜夜,夜不闭户,户枢不蠹,蠹众木折,折槁振落,落落大方,方寸已乱,乱琼碎玉,玉洁冰清,清风明月,月盈则食,食言而肥,肥遁鸣高,高朋满座,座无虚席,席卷天下,下不为例,例直禁简,简明扼要,要价还价,价值连城,城狐社鼠,鼠腹鸡肠,肠肥脑满,满腔热枕,枕石漱流,流离转徙,徙宅忘妻,妻儿老小,小本经营,营私舞弊,弊绝风清,清尘浊水,水磨工夫,夫唱妇随,随才器使,使贪使愚,愚昧无知,知书达礼,礼尚往来,来者不拒,拒谏饰非,非异人任,任人唯亲,亲密无间,间不容发,发指眦裂,裂土分茅,茅塞顿开,开路先锋,锋芒所向,向隅而泣,泣下如雨,雨丝风片,片言折狱,狱货非宝,宝山空回,回光返照,照本宣科,科班出身,身价百倍,倍日并行,行动坐卧,卧薪尝胆,胆破心寒,寒木春华,华不再扬,扬长而去,去粗取精,精诚团结,结党营私,私心杂念,念兹在兹,兹事体大,大势所趋,趋炎附势,势不两立,立此存照,照猫画虎,虎背熊腰,腰缠万贯,贯朽粟陈,陈词滥调,调嘴学舌,舌剑唇枪,枪林弹雨,雨过天青,青出于蓝,蓝田生玉,玉卮无当,当场出彩,彩凤随鸦,鸦雀无闻,闻风而起,起死回生,生拉硬扯,扯篷拉纤,纤芥之疾,疾风迅雷,雷打不动,动辄得咎,咎由自取,取辖投井,井井有条,条三窝四,四衢八街,街头巷尾,尾生之信,信口开河,河山带砺,砺山带河,河清难俟,俟河之清,清汤寡水,水滴石穿,穿云裂石,石沉大海,海立云垂,垂涎欲滴,滴水成冰,冰清玉洁,洁身自好,好肉剜疮,疮痍满目,目不识丁,丁公凿井,井中视星,星旗电戟,戟指怒目,目指气使,使羊将狼,狼心狗肺,肺石风清,清夜扪心,心织笔耕,耕当问奴,奴颜婢膝,膝痒搔背,背信弃义,义无反顾,顾全大局,局促不安,安步当车,车载斗量,量才而为,为渊驱鱼,鱼游釜中,中馈犹虚,虚有其表,表里如一,一呼百诺,诺诺连声,声罪致讨,讨价还价,价增一顾,顾盼自雄,雄心壮志,志美行厉,厉兵秣马,马工枚速,速战速决,决一雌雄,雄才大略,略见一斑,斑驳陆离,离弦走板,板上钉钉,钉嘴铁舌,舌桥不下,下马看花,花样翻新,新陈代谢,谢天谢地,地久天长,长枕大被,被山带河,河落海干,干柴烈火,火上浇油,油腔滑调,调兵遣将,将伯之助,助人为乐,乐而不淫,淫词艳曲,曲终奏雅,雅俗共赏,赏罚分明,明刑不戮,戮力同心,心心相印,印累绶若,若有所失,失张失智,智圆行方,方枘圆凿,凿凿有据,据为己有,有眼无珠,珠光宝气,气味相投,投鼠忌器,器宇轩昂,昂首阔步,步履维艰,艰苦卓绝,绝少分甘,甘雨随车,车水马龙,龙飞凤舞,舞衫歌扇,扇枕温被,被发缨冠,冠冕堂皇,皇天后土,土阶茅屋,屋乌之爱,爱莫能助,助我张目,目挑心招,招风惹草,草率收兵,兵不雪刃,刃迎缕解,解衣推食,食古不化,化零为整,整装待发,发凡起例,例行公事,事必躬亲,亲如骨肉,肉跳心惊,惊弓之鸟,鸟枪换炮,炮凤烹龙,龙蛇飞动,动人心弦,弦外之音,音容笑貌,貌合心离,离心离德,德高望重,重蹈覆辙,辙乱旗靡,靡靡之音,音容宛在,在所难免,免开尊口,口耳之学,学而不厌,厌难折冲,冲口而出,出谷迁乔,乔龙画虎,虎踞龙盘,盘马弯弓,弓折刀尽,尽善尽美,美意延年,年高望重,重温旧梦,梦寐以求,求全之毁,毁家纾难,难言之隐,隐恶扬善,善始善终,终南捷径,径情直行,行成于思,思潮起伏,伏低做小,小恩小惠,惠而不费,费尽心机,机关算尽,尽忠报国,国士无双,双宿双飞,飞灾横祸,祸从天降,降格以求,求同存异,异名同实,实至名归,归真反璞,璞玉浑金,金玉锦绣,绣花枕头,头没杯案,案牍劳形,形单影只,只字不提,提心吊胆,胆大心细,细枝末节,节用裕民,民脂民膏,膏唇试舌,舌锋如火,火伞高张,张冠李戴,戴月披星,星移斗转,转祸为福,福至心灵,灵丹圣药,药笼中物,物以类聚,聚蚊成雷,雷厉风行,行将就木,木本水源,源源不断,断烂朝报,报冰公事,事预则立,立身处世,世外桃源,源源不绝,绝甘分少,少不经事,事不师古,古今中外,外强中干,干城之将,将机就机,机杼一家,家常便饭,饭糗茹草,草木皆兵,兵连祸结,结结巴巴,巴三览四,四面楚歌,歌功颂德,德厚流光,光阴似箭,箭在弦上,上好下甚,甚嚣尘上,上下交困,困知勉行,行若无事,事倍功半,半夜三更,更仆难数,数见不鲜,鲜车怒马,马革裹尸,尸居余气,气冲牛斗,斗筲之器,器小易盈,盈盈一水,水陆杂陈,陈规陋习,习焉不察,察察为明,明知故问,问道于盲,盲人摸象,象齿焚身,身不由主,主客颠倒,倒凤颠鸾,鸾翔凤集,集苑集枯,枯木逢春,春山如笑,笑里藏刀,刀山火海,海外奇谈,谈笑封侯,侯门如海,海阔天空,空室清野,野草闲花,花颜月貌,貌合神离,离乡背井,井蛙之见,见仁见智,智勇双全,全受全归,归马放牛,牛骥同皂,皂白不分,分香卖履,履舄交错,错彩镂金,金城汤池,池鱼之殃,殃及池鱼,鱼烂而亡,亡羊补牢,牢不可破,破颜微笑,笑逐颜开,开宗明义,义薄云天,天南地北,北辕适楚,楚囚对泣,泣不成声,声嘶力竭,竭泽而渔,渔人之利,利令智昏,昏天黑地,地大物博,博闻强识,识途老马,马到成功,功德圆满,满腹狐疑,疑神疑鬼,鬼使神差,差三错四,四时八节,节衣缩食,食而不化,化整为零,零打碎敲,敲冰求火,火树银花,花好月圆,圆颅方趾,趾高气扬,扬汤止沸,沸沸扬扬,扬幡招魂,魂不附体,体无完肤,肤皮潦草,草长莺飞,飞鹰走狗,狗吠非主,主情造意,意马心猿,猿猴取月,月露风云,云蒸霞蔚,蔚为大观,观眉说眼,眼馋肚饱,饱食暖衣,衣架饭囊,囊空如洗,洗耳恭听,听而不闻,闻鸡起舞,舞文弄墨,墨子泣丝,丝恩发怨,怨气冲天,天罗地网,网开三面,面目全非,非同小可,可心如意,意气扬扬,扬眉吐气,气涌如山,山南海北,北叟失马,马仰人翻,翻然改图,图穷匕见,见多识广,广开言路,路柳墙花,花遮柳隐,隐姓埋名,名垂后世,世风日下,下车泣罪,罪孽深重,重于泰山,山盟海誓,誓死不二,二心两意,意气相投,投机取巧,巧取豪夺,夺其谈经,经年累月,月下花前,前思后想,想入非非,非亲非故,故弄玄虚,虚位以待,待人接物,物尽其用,用兵如神,神差鬼使,使臂使指,指不胜屈,屈指可数,数一数二,二姓之好,好高骛远,远走高飞,飞蛾投火,火上弄冰,冰天雪地,地狱变相,相机而动,动如脱兔,兔丝燕麦,麦穗两歧,歧路亡羊,羊质虎皮,皮里阳秋,秋荼密网,网开一面,面红耳赤,赤子之心,心高气傲,傲然屹立,立功赎罪,罪魁祸首,首善之区,区闻陬见,见兔顾犬,犬马之劳,劳燕分飞,飞蛾赴火,火海刀山,山高水低,低声下气,气象万千,千疮百孔,孔席墨突,突然袭击,击节叹赏,赏一劝百,百年不遇,遇事生风,风雨交加,加人一等,等因奉此,此起彼伏,伏地圣人,人欢马叫,叫苦连天,天高听卑,卑礼厚币,币重言甘,甘棠遗爱,爱屋及乌,乌焉成马,马鹿异形,形影相吊,吊死问疾,疾足先得,得陇望蜀,蜀犬吠日,日升月恒,恒河沙数,数黑论黄,黄雀伺蝉,蝉不知雪,雪窑冰天,天真烂漫,漫不经心,心心念念,念念不忘,忘乎所以,以指挠沸,沸反盈天,天上石麟,麟趾呈祥,祥麟威凤,凤凰来仪,仪静体闲,闲云野鹤,鹤发鸡皮,皮里春秋,秋风过耳,耳食之谈,谈笑自若,若明若暗,暗气暗恼,恼羞成怒,怒目而视,视民如伤,伤弓之鸟,鸟语花香,香花供养,养痈成患,患难与共,共枝别干,干卿底事,事出有因,因敌取资,资深望重,重睹天日,日上三竿,竿头直上,上援下推,推襟送抱,抱蔓摘瓜,瓜熟蒂落,落花流水,水米无交,交浅言深,深更半夜,夜长梦多,多才多艺,艺不压身,身心交病,病从口入,入门问讳,讳莫如深,深恶痛绝,绝处逢生,生关死劫,劫富济贫,贫贱骄人,人生如寄,寄人篱下,下气怡声,声振林木,木人石心,心旷神怡,怡然自得,得寸进尺,尺短寸长,长目飞耳,耳聪目明,明辨是非,非驴非马,马瘦毛长,长驱直入,入木三分,分文不取,取信于民,民怨沸腾,腾蛟起凤,凤毛济美,美女簪花,花说柳说,说黄道黑,黑灯瞎火,火光烛天,天壤悬隔,隔年皇历,历历可数,数白论黄,黄袍加身,身外之物,物换星移,移樽就教,教学相长,长年累月,月晕而风,风流倜傥,傥来之物,物是人非,非池中物,物极必返,反经行权,权宜之计,计出万全,全无心肝,肝肠寸断,断梗飘蓬,蓬户瓮牖,牖中窥日,日积月累,累瓦结绳,绳锯木断,断发文身,身体力行,行不胜衣,衣不完采,采兰赠药,药石之言,言传身教,教一识百,百花齐放,放任自流,流星赶月,月下老人,人杰地灵,灵机一动,动魄惊心,心慈面软,软红香土,土龙刍狗,狗彘不若,若即若离,离群索居,居安思危,危如累卵,卵与石斗,斗转星移,移山倒海,海水群飞,飞短流长,长治久安,安之若素,素昧平生,生栋覆屋,屋如七星,星罗棋布,布鼓雷门,门到户说,说三道四,四平八稳,稳扎稳打,打牙犯嘴,嘴直心快,快步流星,星火燎原,原原本本,本末倒置,置若罔闻,闻风丧胆,胆小如鼠,鼠窜狼奔,奔走相告,告朔饩羊,羊狠狼贪,贪污腐化,化为乌有,有备无患,患难之交,交淡若水,水过鸭背,背城借一,一塌糊涂,涂脂抹粉,粉白黛黑,黑白分明,明目张胆,胆战心惊,惊心悼胆,胆大心小,小廉曲谨,谨毛失貌,貌似强大,大璞不完,完事大吉,吉光片羽,羽毛未丰,丰衣足食,食肉寝皮,皮相之见,见笑大方,方便之门,门当户对,对酒当歌,歌舞升平,平白无故,故入人罪,罪该万死,死灰复燃,燃眉之急,急不暇择,择善而从,从心所欲,欲擒故纵,纵虎归山,山栖谷隐,隐忍不言,言之凿凿,凿壁偷光,光复旧物,物腐虫生,生不逢时,时不再来,来者可追,追本穷源,源源而来,来者不善,善善恶恶,恶语中伤,伤心惨目,目不暇接,接踵而来,来日大难,难以置信,信口雌黄,黄道吉日,日下无双,双瞳剪水,水火无情,情至意尽,尽如人意,意气风发,发号施令,令人作呕,呕心沥血,血气方刚,刚直不阿,阿谀逢迎,迎头赶上,上下其手,手不释卷,卷土重来,来情去意,意在笔先,先意承志,志士仁人,人寿年丰,丰亨豫大,大言不惭,惭凫企鹤,鹤立鸡群,群雌粥粥,粥少僧多,多藏厚亡,亡命之徒,徒托空言,言重九鼎,鼎新革故,故作高深,深藏若虚,虚张声势,势倾天下,下里巴人,人才济济,济困扶危,危言危行,行云流水,水泄不通,通力合作,作威作福,福无双至,至高无上,上雨旁风,风情月债,债多不愁,愁眉锁眼,眼高手低,低三下四,四大皆空,空前绝后,后生可畏,畏葸不前,前车之鉴,鉴往知来,来去分明,明白了当,当门抵户,户限为穿,穿壁引光,光前裕后,后起之秀,秀而不实,实与有力,力争上游,游刃有余,余波未平,平淡无奇,奇珍异宝,宝刀不老,老态龙钟,钟灵毓秀,秀才人情,情窦初开,开山祖师,师老兵破,破瓜之年,年富力强,强人所难,难解难分,分秒必争,争猫丢牛,牛鬼蛇神,神出鬼没,没精打采,采薪之忧,忧患余生,生死存亡,亡羊得牛,牛鼎烹鸡,鸡犬不宁,宁缺毋滥,滥用职权,权衡轻重,重见天日,日以继夜,夜以继日,日新月异,异端邪说,说黑道白,白璧无瑕,瑕瑜互见,见兔放鹰,鹰瞵鹗视,视而不见,见猎心喜,喜新厌旧,旧调重弹,弹尽援绝,绝路逢生,生死相依,依然故我,我心如秤,秤平斗满,满面春风,风刀霜剑,剑拔弩张,张三李四,四不拗六,六马仰秣,秣马厉兵,兵不由将,将计就计,计无所出,出生入死,死气沉沉,沉鱼落雁,雁杳鱼沉,沉李浮瓜,瓜剖豆分,分甘共苦,苦中作乐,乐极生悲,悲天悯人,人言可畏,畏缩不前,前俯后仰,仰首伸眉,眉高眼低,低首下心,心乱如麻,麻木不仁,仁言利博,博士买驴,驴鸣犬吠,吠影吠声,声威大震,震古烁今,今非昔比,比肩继踵,踵决肘见,见钱眼开,开诚布公,公诸同好,好逸恶劳,劳师动众,众口难调,调虎离山,山崩钟应,应运而生,生龙活虎,虎狼之势,势成骑虎,虎尾春冰,冰炭不投,投畀豺虎,虎口余生,生老病死,死不悔改,改邪归正,正理平治,治国安民,民保于信,信及豚鱼,鱼贯而入,入不敷出,出入人罪,罪有应得,得过且过,过目不忘,忘其所以,以莛叩钟,钟鸣漏尽,尽人皆知,知难而退,退如山移,移天易日,日就月将,将信将疑,疑信参半,半吞半吐,吐刚茹柔,柔茹刚吐,吐哺握发,发愤图强,强聒不舍,舍生忘死,死不瞑目,目送手挥,挥戈反日,日暮途穷,穷奢极欲,欲罢不能,能工巧匠,匠心独运,运用自如,如应斯响,响彻云霄,霄壤之别,别具一格,格格不入,入井望天,天翻地覆,覆车之鉴,鉴影度形,形枉影曲,曲高和寡,寡见少闻,闻过则喜,喜从天降,降心相从,从井救人,人心所向,向天而唾,唾手可得,得意忘形,形影相随,随俗浮沉,沉冤莫白,白云苍狗,狗头军师,师出有名,名正言顺,顺水人情,情急智生,生离死别,别有用心,心如死灰,灰心丧气,气焰熏天,天长日久,久安长治,治病救人,人心归向,向壁虚造,造谣惑众,众擎易举,举案齐眉,眉目如画,画中有诗,诗中有画,画虎类狗,狗仗人势,势焰熏天,天悬地隔,隔世之感,感激涕零,零敲碎打,打成一片,片甲不回,回天之力,力不从心,心坚石穿,穿井得人,人亡物在,在所不惜,惜墨如金,金枝玉叶,叶落知秋,秋色平分,分斤掰两,两瞽相扶,扶危济困,困兽犹斗,斗鸡走狗,狗血喷头,头童齿豁,豁然贯通,通今博古,古调单弹,弹尽粮绝,绝无仅有,有枝添叶,叶公好龙,龙马精神,神魂颠倒,倒持泰阿,阿其所好,好为人师,师出无名,名存实亡,亡魂丧胆,胆大包天,天怒人怨,怨天尤人,人己一视,视同路人,人尽其才,才疏意广,广土众民,民胞物与,与世无争,争权夺利,利欲熏心,心灵手巧,巧不可接,接三连四,四亭八当,当务之急,急流勇退,退避三舍,舍己救人,人心不古,古貌古心,心手相应,应付裕如,如释重负,负荆请罪,罪恶滔天,天昏地暗,暗箭伤人,人存政举,举世瞩目,目无全牛,牛刀割鸡,鸡鸣狗吠,吠形吠声,声应气求,求田问舍,舍己从人,人微权轻,轻重倒置,置之脑后,后来居上,上下一心,心灰意冷,冷暖自知,知人之明,明争暗斗,斗转参横,横七竖八,八方呼应,应付自如,如花似锦,锦心绣口,口沸目赤,赤胆忠心,心平气和,和盘托出,出将入相,相惊伯有,有求必应,应有尽有,有名无实,实逼处此,此唱彼和,和而不同,同工异曲,曲尽其妙,妙手空空,空谷传声,声势浩大,大度包容,容光焕发,发扬光大,大有人在,在家出家,家贫亲老,老羞成怒,怒发冲冠,冠盖相望,望子成龙,龙争虎斗,斗酒只鸡,鸡口牛后,后患无穷,穷凶极恶,恶醉强酒,酒入舌出,出以公心,心术不正,正襟危坐,坐观成败,败军之将,将伯之呼,呼幺喝六,六尺之孤,孤独矜寡,寡不敌众,众所周知,知无不言,言过其实,实获我心,心到神知,知小谋大,大名鼎鼎,鼎鼎大名,名目繁多,多愁善感,感慨万千,千载难逢,逢人说项,项背相望,望穿秋水,水尽鹅飞,飞蓬随风,风行革偃,偃武修文,文不加点,点石成金,金舌蔽口,口讲指画,画脂镂冰,冰雪聪明,明镜高悬,悬鹑百结,结驷连骑,骑驴觅驴,驴前马后,后继无人,人微言轻,轻而易举,举一反三,三生有幸,幸灾乐祸,祸国殃民,民富国强,强作解人,人多势众,众口铄金,金刚怒目,目光如鼠,鼠窃狗偷,偷工减料,料事如神,神通广大,大敌当前,前所未闻,闻一知十,十围五攻,攻苦食淡,淡汝浓抹,抹月秕风,风花雪夜,夜郎自大,大打出手,手到病除,除暴安良,良工心苦,苦大仇深,深入人心,心安理得,得胜回朝,朝梁暮陈,陈陈相因,因循守旧,旧地重游,游山玩水,水涨船高,高义薄云,云兴霞蔚,蔚然成风,风流罪过,过街老鼠,鼠目寸光,光前绝后,后发制人,人云亦云,云过天空,空穴来风,风卷残云,云泥之别,别具匠心,心口如一,一丝不挂,挂一漏万,万古长青,青黄不接,接二连三,三牲五鼎,鼎足而三,三命而俯,俯仰由人,人一己百,百折不回,回味无穷,穷极无聊,聊以自慰,慰情胜无,无拳无勇,勇往直前,前挽后推,推己及人,人众胜天,天灾人祸,祸福相依,依依不舍,舍己为人,人命关天,天下太平,平起平坐,坐不重席,席地而坐,坐井观天,天渊之别,别有洞天,天荒地老,老气横秋,秋水伊人,人定胜天,天保九如,如左右手,手不停挥,挥洒自如,如日中天,天下第一,一星半点,点铁成金,金玉良言,言行不一,一笔抹杀,杀一儆百,百不失一,一举两得,得未曾有,有一得一,一五一十,十之八九,九九归一,一往无前,前所未有,有何面目,目空一切,切肤之痛,痛心疾首,首屈一指,指鸡骂狗,狗眼看人,人面兽心,心回意转,转嗔为喜,喜怒哀乐,乐不可支,支吾其词,词钝意虚,虚情假意,意气用事,事以密成,成竹在胸,你是我见过最有耐心的人 ^ _ ^","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-center"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/tx.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">7</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第1章-Spring概述"><span class="toc-number">1.</span> <span class="toc-text">第1章 Spring概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sping简述"><span class="toc-number">1.1.</span> <span class="toc-text">sping简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么使用spring"><span class="toc-number">1.2.</span> <span class="toc-text">怎么使用spring</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不放入到spring容器中的对象"><span class="toc-number">1.3.</span> <span class="toc-text">不放入到spring容器中的对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么样的对象放入容器中"><span class="toc-number">1.4.</span> <span class="toc-text">什么样的对象放入容器中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用spring框架的步骤"><span class="toc-number">1.5.</span> <span class="toc-text">使用spring框架的步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第2章-IOC-控制反转"><span class="toc-number">2.</span> <span class="toc-text">第2章 IOC 控制反转</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ioc技术实现使用的DI（依赖注入）"><span class="toc-number">2.1.</span> <span class="toc-text">ioc技术实现使用的DI（依赖注入）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于xml的DI"><span class="toc-number">2.2.</span> <span class="toc-text">基于xml的DI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#set注入"><span class="toc-number">2.2.1.</span> <span class="toc-text">set注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造注入"><span class="toc-number">2.2.2.</span> <span class="toc-text">构造注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动注入"><span class="toc-number">2.2.3.</span> <span class="toc-text">自动注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于注解的DI"><span class="toc-number">2.3.</span> <span class="toc-text">基于注解的DI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用注解"><span class="toc-number">2.3.1.</span> <span class="toc-text">常用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注解的使用步骤："><span class="toc-number">2.3.2.</span> <span class="toc-text">注解的使用步骤：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ioc能实现解耦合"><span class="toc-number">2.4.</span> <span class="toc-text">ioc能实现解耦合</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第3章-AOP-面向切面编程"><span class="toc-number">3.</span> <span class="toc-text">第3章 AOP 面向切面编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#动态代理"><span class="toc-number">3.1.</span> <span class="toc-text">动态代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jdk动态代理"><span class="toc-number">3.1.1.</span> <span class="toc-text">jdk动态代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cglib动态代理"><span class="toc-number">3.1.2.</span> <span class="toc-text">cglib动态代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态代理作用"><span class="toc-number">3.1.3.</span> <span class="toc-text">动态代理作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP概述"><span class="toc-number">3.2.</span> <span class="toc-text">AOP概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP-编程术语-掌握"><span class="toc-number">3.3.</span> <span class="toc-text">AOP 编程术语(掌握)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么时候考虑使用AOP技术"><span class="toc-number">3.4.</span> <span class="toc-text">什么时候考虑使用AOP技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP的实现框架"><span class="toc-number">3.5.</span> <span class="toc-text">AOP的实现框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aspectj框架的使用"><span class="toc-number">3.6.</span> <span class="toc-text">aspectj框架的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#表示切面位置的切入点表达式"><span class="toc-number">3.6.1.</span> <span class="toc-text">表示切面位置的切入点表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#表示切面的执行时间，使用的通知注解"><span class="toc-number">3.6.2.</span> <span class="toc-text">表示切面的执行时间，使用的通知注解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第4章-Spring集成Mybatis"><span class="toc-number">4.</span> <span class="toc-text">第4章 Spring集成Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#整合的想法"><span class="toc-number">4.1.</span> <span class="toc-text">整合的想法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis使用步骤"><span class="toc-number">4.2.</span> <span class="toc-text">mybatis使用步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#交给spring的mybatis对象"><span class="toc-number">4.3.</span> <span class="toc-text">交给spring的mybatis对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第5章-Spring事务"><span class="toc-number">5.</span> <span class="toc-text">第5章 Spring事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是事务"><span class="toc-number">5.1.</span> <span class="toc-text">什么是事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在什么时候想到使用事务"><span class="toc-number">5.2.</span> <span class="toc-text">在什么时候想到使用事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通常怎么处理事务"><span class="toc-number">5.3.</span> <span class="toc-text">通常怎么处理事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题中事务的处理方式，有什么不足"><span class="toc-number">5.4.</span> <span class="toc-text">问题中事务的处理方式，有什么不足</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么解决不足"><span class="toc-number">5.5.</span> <span class="toc-text">怎么解决不足</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#处理事务，需要怎么做，做什么"><span class="toc-number">5.6.</span> <span class="toc-text">处理事务，需要怎么做，做什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring框架中提供的事务处理方案"><span class="toc-number">5.7.</span> <span class="toc-text">spring框架中提供的事务处理方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结spring的事务"><span class="toc-number">5.8.</span> <span class="toc-text">总结spring的事务</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第6章-Web项目怎么使用容器对象"><span class="toc-number">6.</span> <span class="toc-text">第6章 Web项目怎么使用容器对象</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://s1.ax1x.com/2020/05/25/tp0G9S.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">JInterest</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Spring</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-06-01 00:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-01</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-01 12:37:17"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-01</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/java%E6%A1%86%E6%9E%B6/">java框架</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">8.8k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 33 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="第1章-Spring概述"><a href="#第1章-Spring概述" class="headerlink" title="第1章 Spring概述"></a><center>第1章 Spring概述</center></h1><h2 id="sping简述"><a href="#sping简述" class="headerlink" title="sping简述"></a>sping简述</h2><ul>
<li><p>一个轻量级框架，核心技术是ioc，aop，针对接口编程，实现解耦合。</p>
</li>
<li><p>一个容器，储存java对象的容器，需要做的是把对象放入到容器中</p>
</li>
<li><p>方便集成各种优秀框架</p>
<blockquote>
<p>Spring 不排斥各种优秀的开源框架，相反 Spring 可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如 Struts,Hibernate、MyBatis）等的直接支持。简化框架的使用。Spring 像插线板一样，其他框架是插头，可以容易的组合到一起。需要使用哪个框架，就把这个插头放入插线板。不需要可以轻易的移除。</p>
</blockquote>
</li>
<li><p><a href="https://spring.io/" target="_blank" rel="noopener">spring官网</a> ，<a href="https://www.docs4dev.com/docs/zh/spring-framework/4.3.21.RELEASE/reference" target="_blank" rel="noopener">spring中文文档</a></p>
</li>
</ul>
<h2 id="怎么使用spring"><a href="#怎么使用spring" class="headerlink" title="怎么使用spring"></a>怎么使用spring</h2><ol>
<li>spring是一个容器，把项目中用的对象放入到容器中</li>
<li>让容器完成对象的创建，对象之间关系的管理（属性赋值）</li>
<li>我们在程序中从容器中获取 要使用的对象</li>
</ol>
<h2 id="不放入到spring容器中的对象"><a href="#不放入到spring容器中的对象" class="headerlink" title="不放入到spring容器中的对象"></a>不放入到spring容器中的对象</h2><ol>
<li>实体类对象，实体类数据来自数据库的</li>
<li>servlet， listener， filter等由Tomcat管理的</li>
</ol>
<h2 id="什么样的对象放入容器中"><a href="#什么样的对象放入容器中" class="headerlink" title="什么样的对象放入容器中"></a>什么样的对象放入容器中</h2><ul>
<li>dao类，service类，controller类，工具类<ol>
<li>xml配置文件，使用<code>&lt;bean&gt;</code></li>
<li>注解</li>
</ol>
</li>
<li>spring中的对象默认都是单例的，在容器中叫这个名称的对象只有一个</li>
</ul>
<h2 id="使用spring框架的步骤"><a href="#使用spring框架的步骤" class="headerlink" title="使用spring框架的步骤"></a>使用spring框架的步骤</h2><ol>
<li><p>加入依赖</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建类：接口，实现类，没有接口的类</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SomeService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSome</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServiceImpl</span>  <span class="keyword">implements</span> <span class="title">SomeService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSome</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SomeServiceImpl 启动"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建spring的配置文件，使用<bean>声明对象</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--xsd 是约束文件的扩展名  xsd 的约束文件功能强，验证比较全面--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--声明java对象交给Spring创建和管理</span></span><br><span class="line"><span class="comment">          class：类的全限定名称，不能是接口（Spring使用反射创建对象）</span></span><br><span class="line"><span class="comment">          id：自定义的对象名称，要求是唯一值。表示在Spring中的对象名称，</span></span><br><span class="line"><span class="comment">              通过这个名称可以从Spring中找到对象。获取对象</span></span><br><span class="line"><span class="comment">           对象是放入到Spring的容器（Map&lt;id,对象&gt;）</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"someService"</span> <span class="attr">class</span>=<span class="string">"com.test.service.SomeServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--&lt;bean&gt;等同于SomeService someService = new SomServiceImpl();--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>我们使用容器中的对象，通过ApplicationContext接口和他的实现类ClassPathXmlApplcactionContext的方法getBean()</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">     System.out.println( <span class="string">"Hello World!"</span> );</span><br><span class="line">     <span class="comment">//定义Spring的配置文件</span></span><br><span class="line">     String config=<span class="string">"applicationContext.xml"</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//创建Spring的容器对象，根据Spring配置文件的位置，使用接口的不同实现类</span></span><br><span class="line">     <span class="comment">//如果Spring配置文件位置是在类路径下（classpath）</span></span><br><span class="line">     ApplicationContext ctx= <span class="keyword">new</span> ClassPathXmlApplicationContext(config);</span><br><span class="line"><span class="comment">//根目录下    ApplicationContext ctx = new FileSystemXmlApplicationContext(config);</span></span><br><span class="line">		</span><br><span class="line">     <span class="comment">//创建容器对象时，就把配置文件的所有对象都创建出来，放到容器中，需要时再取出来</span></span><br><span class="line">     SomeService service= (SomeService) ctx.getBean(<span class="string">"someService"</span>);</span><br><span class="line">     <span class="comment">//调用业务的方法</span></span><br><span class="line">     service.doSome();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="第2章-IOC-控制反转"><a href="#第2章-IOC-控制反转" class="headerlink" title="第2章 IOC 控制反转"></a><center>第2章 IOC 控制反转</center></h1><blockquote>
<p>控制反转（IoC，Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。通过容器实现对象的创建，属性赋值，依赖的管理。</p>
</blockquote>
<ul>
<li><p><strong>描述</strong>：把对象的创建，赋值，管理工作都交给代码之外的容器实现，也就是对象的创建是有其它外部资源完成</p>
</li>
<li><p><strong>控制</strong>： 创建对象，对象的属性赋值，对象之间的关系管理。</p>
</li>
<li><p><strong>反转</strong>： 把原来的开发人员管理，创建对象的权限转移给代码之外的容器实现。 由容器代替开发人员管理对象。创建对象，给属性赋值。</p>
</li>
<li><p><strong>正转</strong>：由开发人员在代码中，使用new 构造方法创建对象， 开发人员主动管理对象。</p>
<pre><code>public static void main(String args[]){
    Student student = new Student(); // 在代码中， 创建对象。--正转。
 }</code></pre></li>
</ul>
<h2 id="ioc技术实现使用的DI（依赖注入）"><a href="#ioc技术实现使用的DI（依赖注入）" class="headerlink" title="ioc技术实现使用的DI（依赖注入）"></a>ioc技术实现使用的DI（依赖注入）</h2><ul>
<li>Spring 容器是一个超级大工厂，负责创建、管理所有的 Java 对象，这些 Java 对象被称为 Bean。Spring 容器管理着容器中 Bean 之间的依赖关系，Spring 使用“依赖注入”的方式来管理 Bean 之间的依赖关系。使用 IoC 实现对象之间的解耦和。<br>  <strong>开发人员在项目中只需要提供对象的名称， 对象的创建，查找，赋值都由容器内部自己实现</strong><br>  <strong>(spring使用di的技术， 底层使用的是反射机制)</strong></li>
</ul>
<ul>
<li>为什么要使用 ioc ： <code>目的就是减少对代码的改动， 也能实现不同的功能。 实现解耦合</code></li>
</ul>
<h2 id="基于xml的DI"><a href="#基于xml的DI" class="headerlink" title="基于xml的DI"></a>基于xml的DI</h2><h3 id="set注入"><a href="#set注入" class="headerlink" title="set注入"></a>set注入</h3><ul>
<li>spring调用类的set方法实现属性赋值</li>
</ul>
<ol>
<li>简单类型的set注入<property name="属性名" value="属性的值" /> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.text.pack01.Student"</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!--通过set方法注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"lisi"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span>  <span class="attr">value</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>引用类型的set注入<proper name="属性名" ref="bean的id" /> <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"school"</span> <span class="attr">ref</span>=<span class="string">"school"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="构造注入"><a href="#构造注入" class="headerlink" title="构造注入"></a>构造注入</h3><ul>
<li>spring调用有参数构造方法</li>
</ul>
<ol>
<li><code>&lt;constructor-arg&gt;</code>的name属性，name表示构造方法的形参名</li>
<li><code>&lt;constructor-arg&gt;</code>的index属性，表示构造方法形参的位置，从0开始</li>
</ol>
<h3 id="自动注入"><a href="#自动注入" class="headerlink" title="自动注入"></a>自动注入</h3><ol>
<li>byName: 按名称注入， java类中引用类型的<strong>【属性名】</strong>和spring容器中bean的<strong>【id】</strong>一样，数据类型一样。这样的bean赋值给引用类型<br> <code>&lt;bean id=&quot;student&quot; class=&quot;com.text.pack01.Student&quot; autowire=&quot;byName&quot;&gt;</code></li>
</ol>
<ol start="2">
<li>byType：按类型注入，java类中引用类型的是<strong>【数据类型】</strong>和spring容器中bean的<strong>【class】</strong>是同源关系的，这样的bean能够赋值给引用类型</li>
</ol>
<h2 id="基于注解的DI"><a href="#基于注解的DI" class="headerlink" title="基于注解的DI"></a>基于注解的DI</h2><h3 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h3><ol>
<li><strong>@Component</strong> 创建对象</li>
<li><strong>@Repository</strong> 创建dao对象，用来访问数据库的</li>
<li><strong>@Service</strong> 创建Service对象， 处理业务逻辑的，可以有事务功能</li>
<li><strong>@Controller</strong> 创建控制器对象的， 接收请求，显示处理结果的</li>
<li><strong>@Value</strong> 简单类型的属性赋值</li>
<li><strong>@Autowired</strong> spring框架中引用类型的赋值注解， 支持byName,byType,默认是byType</li>
<li><strong>@Resource</strong> jdk中的注解，spring框架提供了对这个注解的功能支持,使用自动注入给引用类型赋值，<br>支持byName，byType，默认是byName</li>
</ol>
<h3 id="注解的使用步骤："><a href="#注解的使用步骤：" class="headerlink" title="注解的使用步骤："></a>注解的使用步骤：</h3><ol>
<li>加入依赖 ：spring-context, 间接加入spring-aop</li>
<li>在类中加入注解 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用注解创建对象 默认类的第一个字母小写</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="comment">//可以在属性上，也可以在set方法上</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"李四"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"20"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Resource  设置byType @Resource（name=byType）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Autowired 默认byType  用byName加@Qualifier注解</span></span><br><span class="line">    <span class="comment">//@Autowired(required=true) 默认true 注入失败报错，required=false 注入失败值为null。</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"mySchool"</span>)<span class="comment">//设置byName</span></span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">	......</span><br></pre></td></tr></table></figure></li>
<li>在spring的配置文件中，加入组件扫描器的标签 &lt;context:component-scan base-package=”包名”&gt;</li>
</ol>
<h2 id="ioc能实现解耦合"><a href="#ioc能实现解耦合" class="headerlink" title="ioc能实现解耦合"></a>ioc能实现解耦合</h2><blockquote>
<p>ioc能够实现业务对象之间的解耦合， 例如service和dao对象之间的解耦合。</p>
</blockquote>
<h1 id="第3章-AOP-面向切面编程"><a href="#第3章-AOP-面向切面编程" class="headerlink" title="第3章 AOP 面向切面编程"></a><center>第3章 AOP 面向切面编程</center></h1><h2 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h2><blockquote>
<p><a href="https://www.jianshu.com/p/9cdcf4e5c27d" target="_blank" rel="noopener">动态代理是指</a>， 程序在整个运行过程中根本就不存在目标类的代理类，目标对象的代理<br>对象只是由代理生成工具（不是真实定义的类）在程序运行时由 JVM 根据反射等机制动态<br>生成的。代理对象与目标对象的代理关系在程序运行时才确立。</p>
</blockquote>
<h3 id="jdk动态代理"><a href="#jdk动态代理" class="headerlink" title="jdk动态代理"></a>jdk动态代理</h3><p>使用jdk反射包中的类实现创建代理对象的功能<br>要求：目标类必须实现接口<br>    <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DaiLi</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">	<span class="comment">//目标对象</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DaiLi</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//代理类的业务方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        SqlSession session=<span class="keyword">null</span>;</span><br><span class="line">        Object obj=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            session= SqlSessionUtil.getSession();</span><br><span class="line">            <span class="comment">//处理业务逻辑</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//真实对象的业务方法</span></span><br><span class="line">            obj=method.invoke(target,args);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//处理业务逻辑完毕</span></span><br><span class="line">            session.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">//异常回滚</span></span><br><span class="line">            session.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            SqlSessionUtil.closeSession(session);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//获取代理对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(),target.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="cglib动态代理"><a href="#cglib动态代理" class="headerlink" title="cglib动态代理"></a>cglib动态代理</h3><p>使用第三方的工具库，实现代理对象的创建<br>要求：目标类必须能够继承，不能是final<br>原理：就是继承，子类就是代理</p>
<h3 id="动态代理作用"><a href="#动态代理作用" class="headerlink" title="动态代理作用"></a>动态代理作用</h3><ol>
<li>在目标类不修改源代码的情况下，增加功能</li>
<li>减少重复的代码</li>
<li>专注业务功能的实现</li>
<li>解耦合： 业务功能和日志，事务这些非业务功能的耦合</li>
</ol>
<h2 id="AOP概述"><a href="#AOP概述" class="headerlink" title="AOP概述"></a>AOP概述</h2><ul>
<li>面向切面编程， 基于动态代理的，可以使用jdk，cglib两种代理方式。<br>Aop就是动态代理的规范化， 把动态代理的实现步骤，方式都定义好了，<br>让开发人员用一种统一的方式，使用动态代理。</li>
<li>怎么理解面向切面编程 ？<br>1)需要在分析项目功能时，找出切面。<br>2)合理的安排切面的执行时间（在目标方法前， 还是目标方法后）<br>3)合理的安全切面执行的位置，在哪个类，哪个方法增加增强功能</li>
</ul>
<h2 id="AOP-编程术语-掌握"><a href="#AOP-编程术语-掌握" class="headerlink" title="AOP 编程术语(掌握)"></a>AOP 编程术语(掌握)</h2><ol>
<li>aspect：切面，表示给业务方法增加的功能，一般日志输出，事务，权限检查等是切面</li>
<li>JoinPoint：连接点，连接点指可以被切面织入的具体方法。通常业务接口中的方法均为连接点。</li>
<li>pointcut:切入点，是一个或多个JoinPoint的集合，表示切面功能执行的位置</li>
<li>Target：目标对象，目标对象指将要被增强的对象 ，即包含主业务逻辑的类的对象 。</li>
<li>advice：通知，也叫增强，表示切面执行的时间，在方法前，方法后等等</li>
</ol>
<h2 id="什么时候考虑使用AOP技术"><a href="#什么时候考虑使用AOP技术" class="headerlink" title="什么时候考虑使用AOP技术"></a>什么时候考虑使用AOP技术</h2><ol>
<li>当你要给一个系统中存在的类修改功能，但是原有类的功能不完善，但是你还有源代码，使用aop就增加功能</li>
<li>你要给项目中的多个类，增加一个相同的功能，使用aop</li>
<li>给业务方法增加事务， 日志输出</li>
</ol>
<h2 id="AOP的实现框架"><a href="#AOP的实现框架" class="headerlink" title="AOP的实现框架"></a>AOP的实现框架</h2><ol>
<li>spring实现了aop， 实现方式是接口</li>
<li><a href="http://www.eclipse.org/aspectj/" target="_blank" rel="noopener">aspectj框架</a> （一个优秀面向切面的框架，它扩展了 Java 语言，提供了强大的切面实现。）<ol>
<li>使用注解可以实现aop的功能</li>
<li>使用xml配置文件中的标签实现aop功能</li>
</ol>
</li>
</ol>
<h2 id="aspectj框架的使用"><a href="#aspectj框架的使用" class="headerlink" title="aspectj框架的使用"></a>aspectj框架的使用</h2><h3 id="表示切面位置的切入点表达式"><a href="#表示切面位置的切入点表达式" class="headerlink" title="表示切面位置的切入点表达式"></a>表示切面位置的切入点表达式</h3><p>execution(访问修饰符 <code>返回值</code>  <code>包名.类名.方法名称(方法的参数)</code> 异常)<br><img src="/blog-img/Spring/aspectj.jpg" alt="切入点表达式"></p>
<h3 id="表示切面的执行时间，使用的通知注解"><a href="#表示切面的执行时间，使用的通知注解" class="headerlink" title="表示切面的执行时间，使用的通知注解"></a>表示切面的执行时间，使用的通知注解</h3><ol>
<li><p><strong>@Before 前置通知</strong> 在目标方法之前先执行切面的功能</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span><span class="comment">//定义切面类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Advice</span> </span>&#123;</span><br><span class="line">    <span class="comment">//增强功能的方法</span></span><br><span class="line">    <span class="meta">@Before</span>(value = <span class="string">"execution(public void com.test.service.pack01.OneServiceImpl.sayHi())"</span>)</span><br><span class="line">    <span class="comment">//属性value表示切面执行的位置</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在目标方法执行之前，例如输出日志"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>@AfterReturning 后置通知</strong> 在目标方法之后执行的，能够获取到目标方法的返回值</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* returning是目标方法的返回值，命名与通知方法的形参名一致</span></span><br><span class="line"><span class="comment">        相当于 Object obj = sayHi(String,Integer)</span></span><br><span class="line"><span class="comment">          AfterReturning(obj)</span></span><br><span class="line"><span class="comment">        可以修改这个返回值，影响最后调用的结果</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"execution(* *..OneServiceImpl.sayHi(String,Integer))"</span>,returning = <span class="string">"obj"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AfterReturning</span><span class="params">(JoinPoint jp,Object obj)</span></span>&#123;</span><br><span class="line">        <span class="comment">/*指定通知方法中的参数: JoinPoint</span></span><br><span class="line"><span class="comment">          JoinPoint（连接点）代表业务方法，要加入切面功能的业务方法 如sayHi</span></span><br><span class="line"><span class="comment">            作用是：可以在通知方法中获取方法执行时的信息，例如方法的名称，方法的实参。</span></span><br><span class="line"><span class="comment">            如果你的切面功能中需要用到方法的信息，就加入JoinPoint。</span></span><br><span class="line"><span class="comment">            这个JointPoint参数的值是由框架赋予，必须是第一个位置的参数</span></span><br><span class="line"><span class="comment">			</span></span><br><span class="line"><span class="comment">        System.out.println("方法的签名（定义）="+jp.getSignature());</span></span><br><span class="line"><span class="comment">        System.out.println("方法的名称 ="+jp.getSignature().getName());</span></span><br><span class="line"><span class="comment">        //获取方法的实参</span></span><br><span class="line"><span class="comment">        Object args[] = jp.getArgs();</span></span><br><span class="line"><span class="comment">        for (Object arg:args</span></span><br><span class="line"><span class="comment">             ) &#123;</span></span><br><span class="line"><span class="comment">		//可以用来判断目标方法的实参是否是想要的，然后再执行功能</span></span><br><span class="line"><span class="comment">            System.out.println("参数="+arg);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="keyword">if</span>(obj!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"见面时间"</span>+<span class="keyword">new</span> Date());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>@Around 环绕通知</strong> 在目标方法前和后都能增强功能，控制目标方法的的访问，修改返回值</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">       @Around: 环绕通知</span></span><br><span class="line"><span class="comment">         属性：value 切入点表达式</span></span><br><span class="line"><span class="comment">         位置；在方法的定义上面</span></span><br><span class="line"><span class="comment">        特点：</span></span><br><span class="line"><span class="comment">         1.它是功能最强的通知</span></span><br><span class="line"><span class="comment">         2.在目标方法的前和后都能增强功能</span></span><br><span class="line"><span class="comment">         3.控制目标方法是否被调用执行</span></span><br><span class="line"><span class="comment">         4.修改原来的目标方法的执行结果，影响最后调用的结果</span></span><br><span class="line"><span class="comment">	  </span></span><br><span class="line"><span class="comment">        环绕通知等同与jdk动态代理的，InvocationHandler接口</span></span><br><span class="line"><span class="comment">           返回值就是目标方法的执行结果，可以被修改。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Around</span>(value = <span class="string">"execution(* *..OneServiceImpl.sayHi(String,Integer))"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">Around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       Object obj=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//目标方法前加入功能</span></span><br><span class="line">       System.out.println(<span class="string">"见面时间"</span>+<span class="keyword">new</span> Date());</span><br><span class="line">       <span class="comment">//通过ProceedingJoinPoint.proceed对目标方法的调用</span></span><br><span class="line">       pjp.proceed();<span class="comment">//method.invoke();</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//目标方法后加入功能</span></span><br><span class="line">       System.out.println(<span class="string">"提交事务"</span>);</span><br><span class="line">       <span class="keyword">return</span> obj;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>@AfterThrowing 异常通知</strong> 在目标方法抛出异常后执行的通知</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//throwing属性 用于指定发生的异常对象</span></span><br><span class="line"><span class="comment">//相当于try&#123;目标方法&#125;catch()&#123; myAfterThrowing(Throwable ex) &#125;</span></span><br><span class="line"><span class="meta">@AfterThrowing</span>(value = <span class="string">"execution(* *..OneServiceImpl.sayHi(String,Integer))"</span>,throwing = <span class="string">"ex"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myAfterThrowing</span><span class="params">(Throwable ex)</span></span>&#123;</span><br><span class="line">    <span class="comment">//记录异常信息</span></span><br><span class="line">    System.out.println(<span class="string">"异常通知：异常发生时执行"</span>+ex.getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>@After 最终通知</strong> 总是会被执行的代码</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//相当于 try&#123;&#125;catch()&#123;&#125;finally&#123; myAfter() &#125;</span></span><br><span class="line"><span class="meta">@After</span>(value=<span class="string">"execution(* *..OneServiceImpl.sayHi(String,Integer))"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myAfter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"最终通知"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>@Pointcut</strong> 定义和管理切入点的辅助注解</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="comment">/*@Pointcut : 定义和管理切入点，如果你的项目中有多个切入点表达式是重复的，可以复用的。</span></span><br><span class="line"><span class="comment">                    可以使用@Pointcut,统一管理切入点表达式。</span></span><br><span class="line"><span class="comment">       属性: value 切入点表达式</span></span><br><span class="line"><span class="comment">       位置: 在自定义的方法上面</span></span><br><span class="line"><span class="comment">      特点:</span></span><br><span class="line"><span class="comment">       当使用@Pointcut定义在一个方法的上面，此时这个方法就是切入点表达式的别名</span></span><br><span class="line"><span class="comment">       其他的通知中，value就可以使用这个方法代替切入点表达式。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Pointcut</span>(value = <span class="string">"execution(* *..OneServiceImpl.sayHi(String,Integer))"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//无需代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@After</span>(value=<span class="string">"pointCut()"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myAfter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"最终通知"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>代理的使用方式</p>
<ol>
<li>如果目标类有接口，框架使用jdk动态代理,得到service对象是com.sun.proxy.$Proxy10</li>
<li>如果目标类没有接口，默认使用的cglib动态代理,得到service对象是com.test.service.pack04.OneServiceImpl$$EnhancerBySpringCGLIB$$eb85df45</li>
<li>有接口也可以强制使用cglib动态代理<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    声明自动代理对象：使用aspectj框架的功能，创建目标对象的代理对象。</span></span><br><span class="line"><span class="comment">    创建代理对象时在内存中实现的，修改目标对象的内存中的机构。</span></span><br><span class="line"><span class="comment">    使用目标对象就是被修改后的代理对象</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">如果你期望目标类有接口，但使用cglib代理</span></span><br><span class="line"><span class="comment">proxy-target-class="true" 告诉框架使用cglib动态代理</span></span><br><span class="line"><span class="comment">&lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>maven依赖</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ol>
<h1 id="第4章-Spring集成Mybatis"><a href="#第4章-Spring集成Mybatis" class="headerlink" title="第4章 Spring集成Mybatis"></a><center>第4章 Spring集成Mybatis</center></h1><h2 id="整合的想法"><a href="#整合的想法" class="headerlink" title="整合的想法"></a>整合的想法</h2><p><strong>使用spring的ioc核心技术，把mybatis框架中使用的对象交给spring统一创建和管理。spring是容器，存放你项目中要使用的各种对象， 例如Service对象， Dao对象，工具类对象等等。</strong></p>
<h2 id="mybatis使用步骤"><a href="#mybatis使用步骤" class="headerlink" title="mybatis使用步骤"></a>mybatis使用步骤</h2><ol>
<li><p>定义dao接口 ，StudentDao,以及service接口和实现类</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertStudent</span><span class="params">(Student student)</span></span>;</span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">selectStudents</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//service.....</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义mapper文件 StudentDao.xml</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"cn.JInterest.dao.StudentDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertStudent"</span>&gt;</span></span><br><span class="line">        insert into student values(#&#123;id&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;age&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudents"</span> <span class="attr">resultType</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">        select id,name,email,age from student order by id desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>定义mybatis的主配置文件 mybatis.xml</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--settings：控制mybatis全局行为--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置mybatis输出日志--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--设置别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--name:实体类所在的包名</span></span><br><span class="line"><span class="comment">            表示cn.JInterest.domain包中的类名就是别名</span></span><br><span class="line"><span class="comment">            你可以使用Student表示cn.JInterest.domain.Student</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"cn.JInterest.domain"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- sql mapper(sql映射文件)的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          name：是包名， 这个包中的所有mapper.xml一次都能加载</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"cn.JInterest.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建dao的代理对象<br><code>StudentDao dao = SqlSession.getMapper(StudentDao.class);</code><br><code>List&lt;Student&gt; students  = dao.selectStudents();</code></p>
</li>
<li><p>要使用dao对象，需要使用getMapper()方法，<br>怎么能使用getMapper()方法，需要哪些条件<br>1)获取SqlSession对象， 需要使用SqlSessionFactory的openSession()方法。<br>2)创建SqlSessionFactory对象。 通过读取mybatis的主配置文件，能创建SqlSessionFactory对象<br>使用Factory能获取SqlSession，有了SqlSession就能有dao ，目的就是获取dao对象，最后service层调用dao对象</p>
</li>
<li><p>spring整合mabatis后的applicationContext.xml文件<br>使用阿里公司的Druid连接池，配置文档：<a href="https://github.com/alibaba/druid/wiki/DruidDataSource配置" target="_blank" rel="noopener">DruidDataSource配置</a></p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       把数据库的配置信息，写在一个独立的文件，编译修改数据库的配置内容</span></span><br><span class="line"><span class="comment">       让spring知道jdbc.properties文件的位置</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--声明数据源DataSource, 作用是连接数据库的,代替了mybatis的连接方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myDataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--set注入给DruidDataSource提供连接数据库信息 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            使用属性配置文件中的数据，语法 $&#123;key&#125;</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span><span class="comment">&lt;!--setUrl()--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.passwd&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.max&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--声明的是mybatis中提供的SqlSessionFactoryBean类，这个类内部创建SqlSessionFactory的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--set注入，把数据库连接池付给了dataSource属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"myDataSource"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis主配置文件的位置</span></span><br><span class="line"><span class="comment">           configLocation属性是Resource类型，读取配置文件</span></span><br><span class="line"><span class="comment">           它的赋值，使用value，指定文件的路径，使用classpath:表示文件的位置</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        创建dao对象，使用SqlSession的getMapper（StudentDao.class）</span></span><br><span class="line"><span class="comment">        MapperScannerConfigurer:在内部调用getMapper()生成每个dao接口的代理对象 。</span></span><br><span class="line"><span class="comment">        org.apache.ibatis.binding.MapperProxy@9cd25ff</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--指定SqlSessionFactory对象的id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--指定包名， 包名是dao接口所在的包名。</span></span><br><span class="line"><span class="comment">            MapperScannerConfigurer会扫描这个包中的所有接口，把每个接口都执行</span></span><br><span class="line"><span class="comment">            一次getMapper()方法，得到每个接口的dao对象。</span></span><br><span class="line"><span class="comment">            创建好的dao对象放入到spring的容器中的。 dao对象的默认名称是 接口名首字母小写</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"cn.JInterest.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--声明service--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentService"</span> <span class="attr">class</span>=<span class="string">"cn.JInterest.service.impl.StudentServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"studentDao"</span> <span class="attr">ref</span>=<span class="string">"studentDao"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>pom.xml</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.JInterest<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring_04-mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--spring核心ioc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--做spring事务用到的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis和spring集成的依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--阿里公司的数据库连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--目的是把src/main/java目录中的xml文件包含到输出结果中。输出到classes目录中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--所在的目录--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span><span class="comment">&lt;!--包括目录下的.properties,.xml 文件都会扫描到--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="交给spring的mybatis对象"><a href="#交给spring的mybatis对象" class="headerlink" title="交给spring的mybatis对象"></a>交给spring的mybatis对象</h2><ol>
<li>数据源DataSource,使用阿里公司的Druid连接池</li>
<li>SqlSessionFactory对象， 使用的SqlSessionFactoryBean在内部创建的SqlSessionFactory</li>
<li>Dao代理对象，使用的MapperScannConfigure，在这个类的内部，调用getMapper()，创建接口的Dao对象</li>
</ol>
<h1 id="第5章-Spring事务"><a href="#第5章-Spring事务" class="headerlink" title="第5章 Spring事务"></a><center>第5章 Spring事务</center></h1><h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><ul>
<li>讲mysql的时候，提出了事务。 事务是指一组sql语句的集合， 集合中有多条sql语句可能是insert ， update ，select ，delete，<br>我们希望这些多个sql语句都能成功，或者都失败， 这些sql语句的执行是一致的，作为一个整体执行。</li>
</ul>
<h2 id="在什么时候想到使用事务"><a href="#在什么时候想到使用事务" class="headerlink" title="在什么时候想到使用事务"></a>在什么时候想到使用事务</h2><ul>
<li>当我的操作，涉及得到多个表，或者是多个sql语句的insert，update，delete。需要保证这些语句都是成功才能完成我的功能，<br>或者都失败，保证操作是符合要求的。</li>
</ul>
<ul>
<li>在java代码中写程序，控制事务，此时事务应该放在那里呢？<br>service类的业务方法上，因为业务方法会调用多个dao方法，执行多个sql语句</li>
</ul>
<h2 id="通常怎么处理事务"><a href="#通常怎么处理事务" class="headerlink" title="通常怎么处理事务"></a>通常怎么处理事务</h2><ul>
<li>jdbc访问数据库，处理事务  Connection conn ; conn.commit(); conn.rollback();</li>
<li>mybatis访问数据库，处理事务， SqlSession.commit();  SqlSession.rollback();</li>
<li>hibernate访问数据库，处理事务， Session.commit(); Session.rollback();</li>
</ul>
<h2 id="问题中事务的处理方式，有什么不足"><a href="#问题中事务的处理方式，有什么不足" class="headerlink" title="问题中事务的处理方式，有什么不足"></a>问题中事务的处理方式，有什么不足</h2><ol>
<li>不同的数据库访问技术，处理事务的对象，方法不同，需要了解不同数据库访问技术使用事务的原理</li>
<li>掌握多种数据库中事务的处理逻辑。什么时候提交事务，什么时候回顾事务</li>
<li>处理事务的多种方法。</li>
</ol>
<ul>
<li>总结： 就是多种数据库的访问技术，有不同的事务处理的机制，对象，方法。</li>
</ul>
<h2 id="怎么解决不足"><a href="#怎么解决不足" class="headerlink" title="怎么解决不足"></a>怎么解决不足</h2><ul>
<li>spring提供一种处理事务的统一模型， 能使用统一步骤，方式完成多种不同数据库访问技术的事务处理。<br>使用spring的事务处理机制，可以完成<strong>mybatis</strong>访问数据库的事务处理<br>使用spring的事务处理机制，可以完成<strong>hibernate</strong>访问数据库的事务处理。</li>
</ul>
<h2 id="处理事务，需要怎么做，做什么"><a href="#处理事务，需要怎么做，做什么" class="headerlink" title="处理事务，需要怎么做，做什么"></a>处理事务，需要怎么做，做什么</h2><p><strong>spring处理事务的模型，使用的步骤都是固定的。把事务使用的信息提供给spring就可以了</strong></p>
<ol>
<li><p>事务内部提交，回滚事务，使用的事务管理器对象，代替你完成commit，rollback事务管理器是一个接口和他的众多实现类。</p>
<ul>
<li><p>接口：<strong>PlatformTransactionManager</strong> ，定义了事务重要方法 commit ，rollback</p>
</li>
<li><p>实现类：spring把每一种数据库访问技术对应的事务处理类都创建好了。<br>mybatis访问数据库—spring创建好的是<strong>DataSourceTransactionManager</strong><br>hibernate访问数据库—-spring创建的是<strong>HibernateTransactionManager</strong></p>
</li>
<li><p>怎么使用：你需要告诉spring 你用是那种数据库的访问技术，怎么告诉spring呢？<br>声明数据库访问技术对于的事务管理器实现类， 在spring的配置文件中使用<code>&lt;bean&gt;</code>声明就可以了<br>例如，你要使用mybatis访问数据库，你应该在xml配置文件中<br><code>&lt;bean id=“xxx&quot; class=&quot;...DataSourceTransactionManager&quot;&gt;</code></p>
</li>
</ul>
</li>
<li><p>你的业务方法需要什么样的事务，说明需要事务的类型。<br>说明方法需要的事务：</p>
<ol>
<li><p>事务的隔离级别：有4个值。<br> DEFAULT：采用 DB 默认的事务隔离级别。MySql 的默认为 REPEATABLE_READ； Oracle默认为 READ_COMMITTED。<br> ➢ READ_UNCOMMITTED：读未提交。未解决任何并发问题。<br> ➢ READ_COMMITTED：读已提交。解决脏读，存在不可重复读与幻读。<br> ➢ REPEATABLE_READ：可重复读。解决脏读、不可重复读，存在幻读<br> ➢ SERIALIZABLE：串行化。不存在并发问题。</p>
</li>
<li><p>事务的超时时间： 表示一个方法最长的执行时间，如果方法执行时超过了时间，事务就回滚。<br>   单位是秒， 整数值， 默认是 <code>-1</code>. (涉及因素多，一般默认)</p>
</li>
<li><p>事务的传播行为 ： 控制业务方法是不是有事务的， 是什么样的事务的。<br>7个传播行为，表示你的业务方法调用时，事务在方法之间是如果使用的。<br>掌握以下三个：</p>
<ul>
<li>PROPAGATION_REQUIRED(指定的方法必须在事务内执行。若当前存在事务，就加入到当前事务中；若当前没有事<br>务，则创建一个新事务。)<br><img src="/blog-img/Spring/PROPAGATION_REQUIRED.jpg" alt="PROPAGATION_REQUIRED"></li>
<li>PROPAGATION_REQUIRES_NEW(指定的方法支持当前事务，但若当前没有事务，也可以以非事务方式执行。)<br><img src="/blog-img/Spring/PROPAGATION_REQUIRES_SUPPORTS.jpg" alt="PROPAGATION_REQUIRES_SUPPORTS"></li>
<li>PROPAGATION_SUPPORTS(总是新建一个事务，若当前存在事务，就将当前事务挂起，直到新事务执行完毕。)<br><img src="/blog-img/Spring/PROPAGATION_REQUIRES_NEW.jpg" alt="PROPAGATION_REQUIRES_NEW"></li>
</ul>
</li>
</ol>
</li>
<li><p>spring提交事务，回滚事务的时机</p>
<ol>
<li><p>当你的业务方法，执行成功，没有异常抛出，当方法执行完毕，spring在方法执行后提交事务。事务管理器commit</p>
</li>
<li><p>当你的业务方法抛出<strong>运行时异常或ERROR</strong>， spring执行<strong>回滚</strong>，调用事务管理器的rollback<br>运行时异常的定义： RuntimeException  和他的子类都是运行时异常， 例如NullPointException , NumberFormatException</p>
</li>
<li><p>当你的业务方法抛出<strong>非运行时异常</strong>， 主要是受查异常时，<strong>提交</strong>事务<br>受查异常：在你写代码中，必须处理的异常。例如IOException, SQLException</p>
</li>
</ol>
</li>
</ol>
<h2 id="spring框架中提供的事务处理方案"><a href="#spring框架中提供的事务处理方案" class="headerlink" title="spring框架中提供的事务处理方案"></a>spring框架中提供的事务处理方案</h2><ol>
<li><p>适合中小项目使用的， 注解方案。<br>spring框架自己用aop实现给业务方法增加事务的功能， 使用<strong>@Transactional</strong>注解增加事务。<strong>@Transactional</strong>注解是spring框架自己注解，放在<strong>public方法</strong>的上面，表示当前方法具有事务。<br>可以给注解的属性赋值，表示具体的<strong>隔离级别，传播行为，异常信息</strong>等等</p>
<ul>
<li>使用<strong>@Transactional</strong>的步骤：</li>
</ul>
<ol>
<li><p>需要声明事务管理器对象<br><code>&lt;bean id=&quot;xx&quot; class=&quot;DataSourceTransactionManager&quot;&gt;</code></p>
</li>
<li><p>开启事务注解驱动， 告诉spring框架，我要使用注解的方式管理事务。<br><code>&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;</code><br>spring使用aop机制，创建<strong>@Transactional</strong>所在的类代理对象，给方法加入事务的功能。<br>在你的业务方法执行之前，先开启事务，在业务方法之后提交或回滚事务，使用aop的环绕通知</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">rollbackFor:表示发生指定的异常一定回滚.</span></span><br><span class="line"><span class="comment">   处理逻辑是：</span></span><br><span class="line"><span class="comment">      1) spring框架会首先检查方法抛出的异常是不是在rollbackFor的属性值中</span></span><br><span class="line"><span class="comment">      2) 如果你的抛出的异常不在rollbackFor列表中，spring会判断异常是不是RuntimeException,</span></span><br><span class="line"><span class="comment">             如果是一定回滚。    </span></span><br><span class="line"><span class="comment">  @Transactional(</span></span><br><span class="line"><span class="comment">           propagation = Propagation.REQUIRED,</span></span><br><span class="line"><span class="comment">           isolation = Isolation.DEFAULT,</span></span><br><span class="line"><span class="comment">           readOnly = false,</span></span><br><span class="line"><span class="comment">           rollbackFor = &#123;</span></span><br><span class="line"><span class="comment">                   NullPointerException.class,  NotEnoughException.class</span></span><br><span class="line"><span class="comment">           &#125;</span></span><br><span class="line"><span class="comment">   )*/</span></span><br><span class="line">	<span class="meta">@Transactional</span></span><br><span class="line">	<span class="meta">@Around</span>(<span class="string">"你要增加的事务功能的业务方法名称"</span>)</span><br><span class="line">	<span class="function">Object <span class="title">myAround</span><span class="params">()</span></span>&#123;</span><br><span class="line">          <span class="comment">//开启事务，spring给你开启</span></span><br><span class="line">		 <span class="keyword">try</span>&#123;</span><br><span class="line">		    buy(<span class="number">1001</span>,<span class="number">10</span>);</span><br><span class="line">			<span class="comment">//spring的事务管理器.commit();</span></span><br><span class="line">		 &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			<span class="comment">//spring的事务管理器.rollback();</span></span><br><span class="line">		 &#125; </span><br><span class="line">	 &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>适合大型项目，有很多的类，方法，需要大量的配置事务，使用aspectj框架功能，在spring配置文件中声明类，方法需要的事务。这种方式业务方法和事务配置完全分离。</p>
<p>实现步骤： 都是在xml配置文件中实现。 </p>
<ol>
<li><p>要使用的是aspectj框架，需要加入依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>声明事务管理器对象</li>
</ol>
<p><code>&lt;bean id=&quot;xx&quot; class=&quot;DataSourceTransactionManager&quot;&gt;</code></p>
<ol start="3">
<li><p>声明方法需要的事务类型（配置方法的事务属性【隔离级别，传播行为，超时】）</p>
</li>
<li><p>配置aop：指定哪些哪类要创建代理。</p>
</li>
</ol>
<p><strong>spring配置：</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">数据源配置</span></span><br><span class="line"><span class="comment">.....</span></span><br><span class="line"><span class="comment">.....</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明式事务处理：和源代码完全分离的--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.声明事务管理器对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"myDataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2.声明业务方法它的事务属性（隔离级别，传播行为，超时时间）</span></span><br><span class="line"><span class="comment">          id:自定义名称，表示 &lt;tx:advice&gt; 和 &lt;/tx:advice&gt;之间的配置内容的</span></span><br><span class="line"><span class="comment">          transaction-manager:事务管理器对象的id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"myAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--tx:attributes：配置事务属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--tx:method：给具体的方法配置事务属性，method可以有多个，分别给不同的方法设置事务属性</span></span><br><span class="line"><span class="comment">                name:1）完整的方法名称，不带有包和类。</span></span><br><span class="line"><span class="comment">				2）方法可以使用通配符,* 表示任意字符</span></span><br><span class="line"><span class="comment">                propagation：传播行为，枚举值</span></span><br><span class="line"><span class="comment">                isolation：隔离级别</span></span><br><span class="line"><span class="comment">                rollback-for：你指定的异常类名，全限定类名。 发生异常一定回滚</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"buy"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">rollback-for</span>=<span class="string">"java.lang.NullPointerException,cn.JInterest.except.NotEnoughException"</span>/&gt;</span></span><br><span class="line">			</span><br><span class="line">            <span class="comment">&lt;!--使用通配符，指定很多的方法,从上往下匹配--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"add*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRES_NEW"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--指定修改方法--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"modify*"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--删除方法--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"remove*"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--查询方法，query，search，find--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置aop--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切入点表达式：指定哪些包中类，要使用事务</span></span><br><span class="line"><span class="comment">            id:切入点表达式的名称，唯一值</span></span><br><span class="line"><span class="comment">            expression：切入点表达式，指定哪些类要使用事务，aspectj会创建代理对象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            com.crm.service</span></span><br><span class="line"><span class="comment">            com.service</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"servicePt"</span> <span class="attr">expression</span>=<span class="string">"execution(* *..service..*.*(..))"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--配置增强器：关联adivce和pointcut</span></span><br><span class="line"><span class="comment">           advice-ref:通知，上面tx:advice哪里的配置</span></span><br><span class="line"><span class="comment">           pointcut-ref：切入点表达式的id</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"myAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePt"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
</li>
</ol>
<h2 id="总结spring的事务"><a href="#总结spring的事务" class="headerlink" title="总结spring的事务"></a>总结spring的事务</h2><ol>
<li>管理事务的是 事务管理和他的实现类</li>
<li>spring的事务是一个统一模型<br> 1）指定要使用的事务管理器实现类，使用<code>&lt;bean&gt;</code><br> 2）指定哪些类，哪些方法需要加入事务的功能<br> 3）指定方法需要的隔离级别，传播行为，超时<br>你需要告诉spring，你的项目中类信息，方法的名称，方法的事务传播行为。</li>
</ol>
<h1 id="第6章-Web项目怎么使用容器对象"><a href="#第6章-Web项目怎么使用容器对象" class="headerlink" title="第6章 Web项目怎么使用容器对象"></a><center>第6章 Web项目怎么使用容器对象</center></h1><ul>
<li><p>web使用容器对象：<br>  servlet接受请求调用service层做数据操作</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//请求数据...</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//创建spring的容器对象</span></span><br><span class="line">       String config= <span class="string">"spring.xml"</span>;</span><br><span class="line">       ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(config);</span><br><span class="line">	</span><br><span class="line">       <span class="comment">//获取service,处理业务</span></span><br><span class="line">	StudentService service  = (StudentService) ctx.getBean(<span class="string">"studentService"</span>);</span><br><span class="line">	service.addStudent(student);</span><br></pre></td></tr></table></figure>
<p>  需要的依赖</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- servlet依赖 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- jsp依赖 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1-b03<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>因为web项目是在tomcat服务器上运行的。tomcat启动，项目就一直运行。如果用上面那种方式，获得一次请求就要创建一次ApplicationContext对象，然后把spring.xml文件中所有对象创建出来，同时发送100个请求就要创建100个，垃圾回收器还没来得及回收又创建了，这样很浪费内存</p>
<p>  <strong>解决方案：</strong> 容器对象创建一次， 把容器对象放入到全局作用域ServletContext中。<br>  <strong>实现：</strong> 使用监听器 当全局作用域对象被创建时 创建容器 存入ServletContext<br>  1）配置web.xml</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册监听器ContextLoaderListener</span></span><br><span class="line"><span class="comment">    监听器被创建对象后，会读取/WEB-INF/spring.xml</span></span><br><span class="line"><span class="comment">    为什么要读取文件：因为在监听器中要创建ApplicationContext对象，需要加载配置文件。</span></span><br><span class="line"><span class="comment">    /WEB-INF/applicationContext.xml就是监听器默认读取的spring配置文件路径</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    可以修改默认的文件位置，使用context-param重新指定文件的位置</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    配置监听器：目的是创建容器对象，创建了容器对象， 就能把spring.xml配置文件中的所有对象都创建好。</span></span><br><span class="line"><span class="comment">    用户发起请求就可以直接使用对象了。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- contextConfigLocation:表示配置文件的路径  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--自定义配置文件的路径--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  2)加入监听器依赖</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  3)servlet接受请求调用service层做数据操作</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用框架中的方法，获取容器对象</span></span><br><span class="line">	WebApplicationContext ctx = <span class="keyword">null</span>;</span><br><span class="line">        ServletContext sc = getServletContext();</span><br><span class="line">        ctx = WebApplicationContextUtils.getRequiredWebApplicationContext( sc );</span><br><span class="line">        System.out.println(<span class="string">"容器对象的信息========"</span>+ctx);</span><br><span class="line">		</span><br><span class="line">	<span class="comment">//获取service,处理业务</span></span><br><span class="line">	StudentService service  = (StudentService) ctx.getBean(<span class="string">"studentService"</span>);</span><br><span class="line">	service.addStudent(student);</span><br></pre></td></tr></table></figure></li>
<li><p>WebApplicationContext底层实现<br>查其源码，看其调用关系，就可看到其是从 ServletContext 中读取的属性值，即 Spring容器。<br>  <img src="/blog-img/Spring/ServletContext%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC.jpg" alt=""><br>  (容器对象在 ServletContext 的中存放的 key 为 WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE。)</p>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">啊俊</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://jinterest.github.io/posts/Spring/">http://jinterest.github.io/posts/Spring/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://JInterest.github.io" target="_blank">JInterest</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java%E6%A1%86%E6%9E%B6/">java框架</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2020/05/25/tp00A0.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/posts/jstl/"><img class="prev_cover" src="https://s1.ax1x.com/2020/05/25/tp00A0.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JSTL标签不起作用</div></div></a></div><div class="next-post pull_right"><a href="/posts/Mybatis/"><img class="next_cover" src="https://s1.ax1x.com/2020/05/25/tp0J1g.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Mybatis</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/posts/Mybatis/" title="Mybatis"><img class="relatedPosts_cover" src="https://s1.ax1x.com/2020/05/25/tp0J1g.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-30</div><div class="relatedPosts_title">Mybatis</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'zDlWr8JQ6hUqbbBcpjALdOm7-gzGzoHsz',
  appKey: 'lzARgDVWMg8nNCwcapThS3yp',
  notify: false,
  verify: false,
  placeholder: '请文明发言哦！(输入QQ号可自动获取昵称和邮箱...)',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: true,
  serverURLs: '',
  emojiCDN: '//i0.hdslb.com/bfs/emote/',
  emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
  enableQQ: true,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://s1.ax1x.com/2020/05/25/tp0G9S.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By 啊俊</div><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(1999,05,16,0,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='我已在此等待 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/third-party/ClickShowText.js"></script><script src="https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
      pangu.spacingElementById('content-inner')
})</script><script src="/js/search/local-search.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>